


cookbook 2:


node machine:


root@ip-172-31-74-199:~# chef-client -r package
[2017-11-11T06:31:59+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:31:59+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:31:59+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:31:59+00:00] INFO: Chef-client pid: 16026
[2017-11-11T06:31:59+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:32:00+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x000000000477e580 @version=nil, @type=:recipe, @name="package">] from CLI options
[2017-11-11T06:32:00+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T06:32:00+00:00] INFO: Run List expands to [package]
[2017-11-11T06:32:00+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:32:00+00:00] INFO: Running start handlers
[2017-11-11T06:32:00+00:00] INFO: Start handlers complete.
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:32:01+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T06:32:01+00:00] INFO: Loading cookbooks [package@0.1.0]
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
  - package (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 1 resources
Recipe: package::default
  * apt_package[apache2] action purge[2017-11-11T06:32:01+00:00] INFO: Processing apt_package[apache2] action purge (package::default line 11)
[2017-11-11T06:32:03+00:00] INFO: apt_package[apache2] purged

    - purge  package apache2
[2017-11-11T06:32:03+00:00] INFO: Chef Run complete in 2.87193777 seconds

Running handlers:
[2017-11-11T06:32:03+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:32:03+00:00] INFO: Report handlers complete
Chef Client finished, 1/1 resources updated in 04 seconds
[2017-11-11T06:32:03+00:00] INFO: Sending resource update report (run-id: 6f932de9-f6c8-4d9e-8eeb-e8baa288e7bb)
root@ip-172-31-74-199:~# service apache2 status
? apache2.service
   Loaded: not-found (Reason: No such file or directory)
   Active: inactive (dead)

Nov 11 05:57:37 ip-172-31-74-199 systemd[1]: Starting LSB: Apache2 web server...
Nov 11 05:57:37 ip-172-31-74-199 apache2[14586]:  * Starting Apache httpd web server apache2
Nov 11 05:57:38 ip-172-31-74-199 apache2[14586]:  *
Nov 11 05:57:38 ip-172-31-74-199 systemd[1]: Started LSB: Apache2 web server.
Nov 11 06:32:01 ip-172-31-74-199 systemd[1]: Stopping LSB: Apache2 web server...
Nov 11 06:32:01 ip-172-31-74-199 apache2[16427]:  * Stopping Apache httpd web server apache2
Nov 11 06:32:02 ip-172-31-74-199 apache2[16427]:  *
Nov 11 06:32:02 ip-172-31-74-199 systemd[1]: Stopped LSB: Apache2 web server.




Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:01:56+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:01:56+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:01:56+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:cookbook 2:


node machine:


root@ip-172-31-74-199:~# chef-client -r package
[2017-11-11T06:31:59+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:31:59+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:31:59+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:31:59+00:00] INFO: Chef-client pid: 16026
[2017-11-11T06:31:59+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:32:00+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x000000000477e580 @version=nil, @type=:recipe, @name="package">] from CLI options
[2017-11-11T06:32:00+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T06:32:00+00:00] INFO: Run List expands to [package]
[2017-11-11T06:32:00+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:32:00+00:00] INFO: Running start handlers
[2017-11-11T06:32:00+00:00] INFO: Start handlers complete.
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:32:01+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T06:32:01+00:00] INFO: Loading cookbooks [package@0.1.0]
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
  - package (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 1 resources
Recipe: package::default
  * apt_package[apache2] action purge[2017-11-11T06:32:01+00:00] INFO: Processing apt_package[apache2] action purge (package::default line 11)
[2017-11-11T06:32:03+00:00] INFO: apt_package[apache2] purged

    - purge  package apache2
[2017-11-11T06:32:03+00:00] INFO: Chef Run complete in 2.87193777 seconds

Running handlers:
[2017-11-11T06:32:03+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:32:03+00:00] INFO: Report handlers complete
Chef Client finished, 1/1 resources updated in 04 seconds
[2017-11-11T06:32:03+00:00] INFO: Sending resource update report (run-id: 6f932de9-f6c8-4d9e-8eeb-e8baa288e7bb)
root@ip-172-31-74-199:~# service apache2 status
? apache2.service
   Loaded: not-found (Reason: No such file or directory)
   Active: inactive (dead)

Nov 11 05:57:37 ip-172-31-74-199 systemd[1]: Starting LSB: Apache2 web server...
Nov 11 05:57:37 ip-172-31-74-199 apache2[14586]:  * Starting Apache httpd web server apache2
Nov 11 05:57:38 ip-172-31-74-199 apache2[14586]:  *
Nov 11 05:57:38 ip-172-31-74-199 systemd[1]: Started LSB: Apache2 web server.
Nov 11 06:32:01 ip-172-31-74-199 systemd[1]: Stopping LSB: Apache2 web server...
Nov 11 06:32:01 ip-172-31-74-199 apache2[16427]:  * Stopping Apache httpd web server apache2
Nov 11 06:32:02 ip-172-31-74-199 apache2[16427]:  *
Nov 11 06:32:02 ip-172-31-74-199 systemd[1]: Stopped LSB: Apache2 web server.




Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:01:56+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:01:56+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:01:56+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17217;start=09:01:54;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:01:56+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:01:56+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:01:56+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:01:56+00:00] INFO: Sending resource update report (run-id: 4076b61c-f83f-4478-b3a5-82cbf2d58962)
[2017-11-11T09:01:56+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:01:56+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:01:56+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:01:56+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:03:02+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:02+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:02+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:02+00:00] INFO: Chef-client pid: 17535
[2017-11-11T09:03:02+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:04+00:00] WARN: Run List override has been provided.
[2017-11-11T09:03:04+00:00] WARN: Original Run List: [recipe[package]]
[2017-11-11T09:03:04+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:04+00:00] INFO: Running start handlers
[2017-11-11T09:03:04+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:04+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:03:04+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:03:04+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:03:04+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17530;start=09:03:02;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:03:04+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:03:04+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:04+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:04+00:00] INFO: Sending resource update report (run-id: 03600e09-9eb8-4298-bb5f-90afe7adf9fe)
[2017-11-11T09:03:04+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:04+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:04+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:03:04+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r think::mul
[2017-11-11T09:03:47+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:47+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:47+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:47+00:00] INFO: Chef-client pid: 17853
[2017-11-11T09:03:47+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:48+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003bd3528 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:03:48+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:03:48+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:03:48+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:48+00:00] INFO: Running start handlers
[2017-11-11T09:03:48+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:48+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:48+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:03:49+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its is no longer in the cookbook manifest.
Synchronizing Cookbooks:
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=17848;start=09:03:47;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:03:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:49+00:00] INFO: Sending resource update report (run-id: e914560b-9be6-4d80-8234-51418eaf54ea)
[2017-11-11T09:03:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:03:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client
[2017-11-11T09:04:06+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:04:06+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:04:06+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:04:06+00:00] INFO: Chef-client pid: 18157
[2017-11-11T09:04:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:04:07+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T09:04:07+00:00] INFO: Run List expands to [package]
[2017-11-11T09:04:07+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:04:07+00:00] INFO: Running start handlers
[2017-11-11T09:04:07+00:00] INFO: Start handlers complete.
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:04:07+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T09:04:07+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * apt_package[httpd] action install[2017-11-11T09:04:07+00:00] INFO: Processing apt_package[httpd] action install (package::default line 11)


    ================================================================================
    Error executing action `install` on resource 'apt_package[httpd]'
    ================================================================================

    Chef::Exceptions::Package
    -------------------------
    httpd is a virtual package provided by multiple packages, you must explicitly select one

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/package/recipes/default.rb

     11: package "httpd"do
     12:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/package/recipes/default.rb:11:in `from_file'

    apt_package("httpd") do
      package_name "httpd"
      action [:install]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      declared_type :package
      cookbook_name "package"
      recipe_name "default"
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=18152;start=09:04:06;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:04:08+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:04:08+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:04:08+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:04:08+00:00] INFO: Sending resource update report (run-id: 736ce9e2-15c3-4ff2-b2ca-5b1ce07dd878)
[2017-11-11T09:04:08+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:04:08+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:04:08+00:00] ERROR: apt_package[httpd] (package::default line 11) had an error: Chef::Exceptions::Package: httpd is a virtual package provided by multiple packages, you must explicitly select one
[2017-11-11T09:04:08+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:05:43+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:05:43+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:05:43+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:05:43+00:00] INFO: Chef-client pid: 18477
[2017-11-11T09:05:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:05:44+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000004f9a908 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:05:44+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:05:44+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:05:44+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:05:44+00:00] INFO: Running start handlers
[2017-11-11T09:05:44+00:00] INFO: Start handlers complete.
[2017-11-11T09:05:44+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:05:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:05:44+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/ser.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/files/default/index.html from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/README.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/CHANGELOG.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18472;start=09:05:43;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:05:45+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:05:45+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:05:45+00:00] INFO: Sending resource update report (run-id: 7e63a2ba-67d2-4ab1-ba48-ce628989db75)
[2017-11-11T09:05:45+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:05:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:05:45+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:05:45+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:06:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:06:48+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:06:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:06:48+00:00] INFO: Chef-client pid: 18786
[2017-11-11T09:06:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:06:49+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x00000000035d6d78 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:06:49+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:06:49+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:06:49+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:06:49+00:00] INFO: Running start handlers
[2017-11-11T09:06:49+00:00] INFO: Start handlers complete.
[2017-11-11T09:06:49+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:06:49+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:06:49+00:00] INFO: Loading cookbooks [think@0.220.0]
Synchronizing Cookbooks:
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18781;start=09:06:48;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:06:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:06:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:06:49+00:00] INFO: Sending resource update report (run-id: f8b86f80-e4ec-4df2-9c31-728a2b8a3950)
[2017-11-11T09:06:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:06:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:06:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:06:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:07:08+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:07:08+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:07:08+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:07:08+00:00] INFO: Chef-client pid: 19089
[2017-11-11T09:07:08+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:07:09+00:00] WARN: Run List override has been provided.
[2017-11-11T09:07:09+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T09:07:09+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:07:09+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:07:09+00:00] INFO: Running start handlers
[2017-11-11T09:07:09+00:00] INFO: Start handlers complete.
[2017-11-11T09:07:09+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:07:09+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:07:10+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:07:10+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/templates/default/index.html.erb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/files/default/sample.war in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/mul.rb in the cache.
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:07:10+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:07:10+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:07:10+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=19084;start=09:07:08;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:07:10+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:07:10+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:07:10+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:07:10+00:00] INFO: Sending resource update report (run-id: c0b76063-6e31-40e2-a184-edf24fd6dabf)
[2017-11-11T09:07:10+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:07:10+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:07:10+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:07:10+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:18:39+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:18:39+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:18:39+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:18:39+00:00] INFO: Chef-client pid: 19400
[2017-11-11T09:18:39+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:18:40+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003d3a308 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:18:40+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:18:40+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:18:40+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:18:40+00:00] INFO: Running start handlers
[2017-11-11T09:18:40+00:00] INFO: Start handlers complete.
[2017-11-11T09:18:40+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:18:40+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:18:40+00:00] INFO: Loading cookbooks [multi@0.1.0]
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/templates/default/index.html.erb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/CHANGELOG.md in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/metadata.rb in the cache.
[2017-11-11T09:18:41+00:00] INFO: Storing updated cookbooks/multi/README.md in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name = apache2
 12:  service_name = apache2
 13:  document_root = "/var/www/hmtl"
 14:
 15:  if node [" paltform "] == "amazon"
 16:
 17:  package_name = httpd
 18:  service_name = httpd
 19:  document_root = "/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19395;start=09:18:39;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:18:41+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:18:41+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:18:41+00:00] INFO: Sending resource update report (run-id: 741df3b7-eb45-432e-8803-3d377633b0a4)
[2017-11-11T09:18:41+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:18:41+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:18:41+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:18:41+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:22:37+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:22:37+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:22:37+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:22:37+00:00] INFO: Chef-client pid: 19711
[2017-11-11T09:22:37+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:22:39+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003eb6d58 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:22:39+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:22:39+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:22:39+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:22:39+00:00] INFO: Running start handlers
[2017-11-11T09:22:39+00:00] INFO: Start handlers complete.
[2017-11-11T09:22:39+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:22:39+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:22:39+00:00] INFO: Loading cookbooks [multi@0.1.0]
Synchronizing Cookbooks:
[2017-11-11T09:22:39+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name=apache2
 12:  service_name=apache2
 13:  document_root="/var/www/hmtl"
 14:
 15:  if node["paltform"] == "amazon"
 16:
 17:  package_name=httpd
 18:  service_name=httpd
 19:  document_root="/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19706;start=09:22:37;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:22:39+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:22:39+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:22:39+00:00] INFO: Sending resource update report (run-id: 16f4ce9e-d444-46d0-9bfc-8bffca3ec73c)
[2017-11-11T09:22:39+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:22:39+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:22:39+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:22:39+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)



chef-bootstrap a node:


[root@ip-172-31-64-176 chef-repo]# knife cookbook create think
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook think in /root/chef-repo/cookbooks
** Creating README for cookbook: think
** Creating CHANGELOG for cookbook: think
** Creating metadata for cookbook: think
[root@ip-172-31-64-176 chef-repo]# git init
Initialized empty Git repository in /root/chef-repo/.git/
[root@ip-172-31-64-176 chef-repo]# cd cookbooks/
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd think/
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook delete think
Do you really want to delete think version 0.1.0? (Y/N) y
Deleted cookbook[think version 0.1.0]
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cp /home/ec2-user/shell.pem /root/
[root@ip-172-31-64-176 recipes]# knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
ERROR: Must pass an FQDN or ip to bootstrap
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216--sudo
ERROR: Network Error: getaddrinfo: Name or service not known
Check your knife configuration and network settings
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Installing Chef Omnibus (-v 12)
54.243.15.216 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.243.15.216   to file /tmp/install.sh.1531/install.sh
54.243.15.216 trying wget...
54.243.15.216 ubuntu 16.04 x86_64
54.243.15.216 Getting information for chef stable 12 for ubuntu...
54.243.15.216 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=ubuntu&pv=16.04&m=x86_64
54.243.15.216   to file /tmp/install.sh.1535/metadata.txt
54.243.15.216 trying wget...
54.243.15.216 sha1      b21baa643ef453f488351cd5623756e19ebec749
54.243.15.216 sha256    f2320ba894d92e4fd8fbae81546a70f124754cd40be388ba44de8180fbc2ea4d
54.243.15.216 url       https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216 version   12.21.26
54.243.15.216 downloaded metadata file looks valid...
54.243.15.216 downloading https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216   to file /tmp/install.sh.1535/chef_12.21.26-1_amd64.deb
54.243.15.216 trying wget...
54.243.15.216 Comparing checksum with sha256sum...
54.243.15.216 Installing chef 12
54.243.15.216 installing with dpkg...
54.243.15.216 Selecting previously unselected package chef.
(Reading database ... 51071 files and directories currently installed.)
54.243.15.216 Preparing to unpack .../chef_12.21.26-1_amd64.deb ...
54.243.15.216 Unpacking chef (12.21.26-1) ...
54.243.15.216 Setting up chef (12.21.26-1) ...
54.243.15.216 Thank you for installing Chef!
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Chef-client pid: 1617
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Setting the run_list to [] from CLI options
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List is []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List expands to []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Loading cookbooks []
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:26:44+00:00] WARN: Node positive has an empty run list.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 0 resources
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Chef Run complete in 0.376994307 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/0 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Sending resource update report (run-id: 27d1ea9d-6d56-4b69-b56b-a9fbd53639a2)
[root@ip-172-31-64-176 recipes]# knife node run list add positive think
positive:
  run_list: recipe[think]
[root@ip-172-31-64-176 recipes]# history
    1  ping in.com
    2  cat /etc/issue
    3  git --version
    4  wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
    5  rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
    6  git pull https://github.com/Thinkpositvie/chefrepo.git
    7  git init
    8  git pull https://github.com/Thinkpositvie/chefrepo.git
    9  ls
   10  rm chefdk-1.5.0-1.el6.x86_64.rpm
   11  cd chef-repo/
   12  knife client list
   13  cd ..
   14  rm -rf chef-repo/
   15  unzip chef-starter.zip
   16  cd chef-repo/
   17  knife client list
   18  knife nodelist
   19  knife node list
   20  knife cookbook list
   21  knife cookbook create think
   22  git init
   23  cd cookbooks/
   24  ls
   25  cd think/
   26  ls
   27  cd recipes/
   28  ls
   29  vi default.rb
   30  knife cookbook test think
   31  knife cookbook upload  think
   32  knife cookbook delete think
   33  knife cookbook upload  think
   34  cp /home/ec2-user/shell.pem /root/
   35  knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
   36  knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
   37  knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
   38  knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
   39*
   40  history
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Chef-client pid: 2283
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 1 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:31:50+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Chef Run complete in 0.35214713 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/1 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Sending resource update report (run-id: 98d0ef36-6c0a-437c-9512-d01f270454f4)
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Chef-client pid: 2645
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 2 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:32:30+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216   * linux_user[nag] action create[2017-11-11T05:32:30+00:00] INFO: Processing linux_user[nag] action create (think::default line 19)
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: linux_user[nag] created
54.243.15.216
54.243.15.216     - create user nag
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Chef Run complete in 0.472534973 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 1/2 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Sending resource update report (run-id: 28dabc85-fa7c-4b96-912a-d207c3096afe)
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd -
/root/chef-repo/cookbooks/think/recipes
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think@0.2.0
ERROR: Could not find cookbook think@0.2.0 in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.3.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# vi  metadata.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# chef-client -o think@0.4.0
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] WARN: Did not find config file: /etc/chef/client.rb, using command line options.
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.2
[2017-11-11T06:09:48+00:00] INFO: *** Chef 12.21.2 ***
[2017-11-11T06:09:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:09:48+00:00] INFO: Chef-client pid: 3372
[2017-11-11T06:09:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
Creating a new client identity for ip-172-31-64-176.ec2.internal using the validator key.
[2017-11-11T06:09:50+00:00] INFO: Client key /etc/chef/client.pem is not present - registering

================================================================================
Chef encountered an error attempting to create the client "ip-172-31-64-176.ec2.internal"
================================================================================

System Info:
------------
chef_version=12.21.2
ruby=ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]
program_name=chef-client worker: ppid=3367;start=06:09:48;
executable=/opt/chefdk/bin/chef-client


Running handlers:
[2017-11-11T06:09:50+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T06:09:50+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T06:09:50+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T06:09:50+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T06:09:50+00:00] ERROR: I can't write your private key to /etc/chef/client.pem - check permissions?
[2017-11-11T06:09:50+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 think]# clear
[root@ip-172-31-64-176 think]# lss
-bash: lss: command not found
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# wget https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
--2017-11-11 06:15:12--  https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
Resolving tomcat.apache.org (tomcat.apache.org)... 140.211.11.105, 195.154.151.36, 2001:bc8:2142:300::
Connecting to tomcat.apache.org (tomcat.apache.org)|140.211.11.105|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4606 (4.5K)
Saving to: sample.war

sample.war                                100%[=====================================================================================>]   4.50K  --.-KB/s    in 0s

2017-11-11 06:15:13 (277 MB/s) - sample.war saved [4606/4606]

[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  sample.war  templates
[root@ip-172-31-64-176 think]# mv sample.war files/default/
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd -
/root/chef-repo/cookbooks/think
[root@ip-172-31-64-176 think]# cd files/
[root@ip-172-31-64-176 files]# ls
default
[root@ip-172-31-64-176 files]# cd default/
[root@ip-172-31-64-176 default]# ls
sample.war
[root@ip-172-31-64-176 default]# cd ..
[root@ip-172-31-64-176 files]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# cd..
-bash: cd..: command not found
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# knife cookbook create package
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook package in /root/chef-repo/cookbooks
** Creating README for cookbook: package
** Creating CHANGELOG for cookbook: package
** Creating metadata for cookbook: package
[root@ip-172-31-64-176 cookbooks]# cd  package
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 package]# vi metadata.rb
[root@ip-172-31-64-176 package]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239
ERROR: You must pass a node name with -N when bootstrapping with user credentials
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Installing Chef Omnibus (-v 12)
54.172.193.239 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.172.193.239   to file /tmp/install.sh.2760/install.sh
54.172.193.239 trying wget...
54.172.193.239 el 6 x86_64
54.172.193.239 Getting information for chef stable 12 for el...
54.172.193.239 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=el&pv=6&m=x86_64
54.172.193.239   to file /tmp/install.sh.2765/metadata.txt
54.172.193.239 trying wget...
54.172.193.239 sha1     e1f7d3c6ee99aedeac4ad8a950877af7edc8164c
54.172.193.239 sha256   6a47f8f88d3f4568defa13076a21a005bd48ee3e7100d3c66d8f0cc41554306e
54.172.193.239 url      https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 version  12.21.26
54.172.193.239 downloaded metadata file looks valid...
54.172.193.239 downloading https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239   to file /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 trying wget...
54.172.193.239 Comparing checksum with sha256sum...
54.172.193.239 Installing chef 12
54.172.193.239 installing with rpm...
54.172.193.239 warning: /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
54.172.193.239 Preparing...                          ################################# [100%]
54.172.193.239 Updating / installing...
54.172.193.239    1:chef-12.21.26-1.el6              ################################# [100%]
54.172.193.239 Thank you for installing Chef!
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Chef-client pid: 2837
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:37:38+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239 [2017-11-11T06:37:39+00:00] INFO: yum_package[httpd] installing httpd-2.2.34-1.16.amzn1 from amzn-updates repository
54.172.193.239 [2017-11-11T06:37:42+00:00] INFO: yum_package[httpd] installed httpd at 2.2.34-1.16.amzn1
54.172.193.239
54.172.193.239     - install version 2.2.34-1.16.amzn1 of package httpd
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Chef Run complete in 4.65663913 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/1 resources updated in 06 seconds
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Sending resource update report (run-id: c510a08d-e543-4dd9-99bf-989681c02f82)
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi ser.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
==============================================================================================



node 2:



root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
[root@ip-172-31-64-176 recipes]# cp ser.rb default.rb
cp: overwrite default.rb? n
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Chef-client pid: 4334
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:49:30+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Chef Run complete in 1.424903929 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Sending resource update report (run-id: 71331b69-9302-439d-a0a0-e6759d14301c)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Chef-client pid: 4652
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:50:08+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Chef Run complete in 1.155891701 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Sending resource update report (run-id: f813cfee-9531-4238-acdc-4dc4ec590f9f)
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Chef-client pid: 4969
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 2 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:52:14+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239   * file[/var/www/html/index.html] action create[2017-11-11T06:52:15+00:00] INFO: Processing file[/var/www/html/index.html] action create (package::default line 17)
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] created file /var/www/html/index.html
54.172.193.239
54.172.193.239     - create new file /var/www/html/index.html[2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] updated file contents /var/www/html/index.html
54.172.193.239
54.172.193.239     - update content in file /var/www/html/index.html from none to b3046f
54.172.193.239     --- /var/www/html/index.html 2017-11-11 06:52:15.237958728 +0000
54.172.193.239     +++ /var/www/html/.chef-index20171111-4969-1oleakd.html      2017-11-11 06:52:15.233958737 +0000
54.172.193.239     @@ -1 +1,2 @@
54.172.193.239     + <html><body><h1> 'welcome to chef-world '</h1></body></html>
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Chef Run complete in 1.138662141 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/2 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Sending resource update report (run-id: f3f18758-0b83-48cb-9f5b-3cc94da733d3)


[root@ip-172-31-65-42 ~]# cat /var/www/html/index.html
 <html><body><h1> 'welcome to chef-world '</h1></body></html> [root@ip-172-31-65-42 ~]# cd ..
[root@ip-172-31-65-42 /]# cd -
/root
[root@ip-172-31-65-42 ~]# chef-client -o package@0.3.0
[2017-11-11T07:04:05+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:04:05+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:04:05+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:04:05+00:00] INFO: Chef-client pid: 5284
[2017-11-11T07:04:05+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:04:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:04:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:04:06+00:00] WARN: Overridden Run List: [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List is [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List expands to [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:04:06+00:00] INFO: Running start handlers
[2017-11-11T07:04:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:04:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.3.0"]
[2017-11-11T07:04:06+00:00] INFO: Loading cookbooks [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
  - package (0.3.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:04:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * cookbook_file[/var/www/html/index.html] action create[2017-11-11T07:04:07+00:00] INFO: Processing cookbook_file[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070407.508781
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from b3046f to cf4a23
    --- /var/www/html/index.html        2017-11-11 06:52:15.233958737 +0000
    +++ /var/www/html/.chef-index20171111-5284-d8fvtb.html      2017-11-11 07:04:07.501825799 +0000
    @@ -1,2 +1,3 @@
    - <html><body><h1> 'welcome to chef-world '</h1></body></html>
    +<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>
    +
[2017-11-11T07:04:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:04:07+00:00] INFO: Chef Run complete in 1.207128394 seconds
[2017-11-11T07:04:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:04:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:04:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:04:07+00:00] INFO: Sending resource update report (run-id: 241f3965-9834-434b-a0e6-335244c7639f)
[root@ip-172-31-65-42 ~]# chef-client -o package@0.4.0
[2017-11-11T07:09:04+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:09:04+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:09:04+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:09:04+00:00] INFO: Chef-client pid: 5588
[2017-11-11T07:09:04+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:09:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:09:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:09:06+00:00] WARN: Overridden Run List: [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List is [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List expands to [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:09:06+00:00] INFO: Running start handlers
[2017-11-11T07:09:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:09:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.4.0"]
[2017-11-11T07:09:06+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:09:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * template[/var/www/html/index.html] action create[2017-11-11T07:09:07+00:00] INFO: Processing template[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070907.700207
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from cf4a23 to afa033
    --- /var/www/html/index.html        2017-11-11 07:04:07.501825799 +0000
    +++ /var/www/html/.chef-index20171111-5588-9o80e0.html      2017-11-11 07:09:07.693933345 +0000
    @@ -1,3 +1,5 @@
    -<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>

    +
    +
    +<html><body><h1> 'welcome to chef-templates wolrd' </h1></body></html>
[2017-11-11T07:09:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:09:07+00:00] INFO: Chef Run complete in 1.656787461 seconds
[2017-11-11T07:09:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:09:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:09:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:09:07+00:00] INFO: Sending resource update report (run-id: 982cfb80-8ca5-4bed-ab61-df6c6d61f471)




Using username "ec2-user".
Authenticating with public key "imported-openssh-key"
Last login: Sat Nov 11 05:07:09 2017 from 27.34.252.214

       __|  __|_  )
       _|  (     /   Amazon Linux AMI
      ___|\___|___|

https://aws.amazon.com/amazon-linux-ami/2017.09-release-notes/
[ec2-user@ip-172-31-64-176 ~]$ sudo -y
sudo: invalid option -- 'y'
usage: sudo [-D level] -h | -K | -k | -V
usage: sudo -v [-AknS] [-D level] [-g groupname|#gid] [-p prompt] [-u user
            name|#uid]
usage: sudo -l[l] [-AknS] [-D level] [-g groupname|#gid] [-p prompt] [-U user
            name] [-u user name|#uid] [-g groupname|#gid] [command]
usage: sudo [-AbEHknPS] [-r role] [-t type] [-C fd] [-D level] [-g
            groupname|#gid] [-p prompt] [-u user name|#uid] [-g groupname|#gid]
            [VAR=value] [-i|-s] [<command>]
usage: sudo -e [-AknS] [-r role] [-t type] [-C fd] [-D level] [-g
            groupname|#gid] [-p prompt] [-u user name|#uid] file ...
[ec2-user@ip-172-31-64-176 ~]$ sudo -i
[root@ip-172-31-64-176 ~]# ping in.com
PING in.com (124.153.64.24) 56(84) bytes of data.
64 bytes from 124.153.64.24: icmp_seq=1 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=2 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=3 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=4 ttl=232 time=260 ms
64 bytes from 124.153.64.24: icmp_seq=5 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=6 ttl=232 time=262 ms
64 bytes from 124.153.64.24: icmp_seq=7 ttl=232 time=259 ms
64 bytes from 124.153.64.24: icmp_seq=8 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=9 ttl=232 time=259 ms
64 bytes from 124.153.64.24: icmp_seq=10 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=11 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=12 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=13 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=14 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=15 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=16 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=17 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=18 ttl=232 time=258 ms
64 bytes from 124.153.64.24: icmp_seq=19 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=20 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=21 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=22 ttl=232 time=260 ms
64 bytes from 124.153.64.24: icmp_seq=23 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=24 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=25 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=26 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=27 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=28 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=29 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=30 ttl=232 time=259 ms
64 bytes from 124.153.64.24: icmp_seq=31 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=32 ttl=232 time=258 ms
64 bytes from 124.153.64.24: icmp_seq=33 ttl=232 time=272 ms
64 bytes from 124.153.64.24: icmp_seq=34 ttl=232 time=255 ms
64 bytes from 124.153.64.24: icmp_seq=35 ttl=232 time=265 ms
64 bytes from 124.153.64.24: icmp_seq=36 ttl=232 time=256 ms
^C
--- in.com ping statistics ---
37 packets transmitted, 36 received, 2% packet loss, time 36049ms
rtt min/avg/max/mdev = 255.970/257.943/272.177/3.237 ms
[root@ip-172-31-64-176 ~]# cat /etc/issue
Amazon Linux AMI release 2017.09
Kernel \r on an \m

[root@ip-172-31-64-176 ~]# git --version
git version 2.13.6
[root@ip-172-31-64-176 ~]# wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
--2017-11-11 05:14:58--  https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
Resolving packages.chef.io (packages.chef.io)... 151.101.34.110
Connecting to packages.chef.io (packages.chef.io)|151.101.34.110|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 108045477 (103M) [application/x-rpm]
Saving to: chefdk-1.5.0-1.el6.x86_64.rpm

chefdk-1.5.0-1.el6.x86_64.rpm             100%[=====================================================================================>] 103.04M  26.6MB/s    in 3.9s

2017-11-11 05:15:02 (26.5 MB/s) - chefdk-1.5.0-1.el6.x86_64.rpm saved [108045477/108045477]

[root@ip-172-31-64-176 ~]# rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
warning: chefdk-1.5.0-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
Preparing...                          ################################# [100%]
Updating / installing...
   1:chefdk-1.5.0-1.el6               ################################# [100%]
Thank you for installing Chef Development Kit!
[root@ip-172-31-64-176 ~]# git pull https://github.com/Thinkpositvie/chefrepo.git
fatal: Not a git repository (or any of the parent directories): .git
[root@ip-172-31-64-176 ~]# git init
Initialized empty Git repository in /root/.git/
[root@ip-172-31-64-176 ~]# git pull https://github.com/Thinkpositvie/chefrepo.git
remote: Counting objects: 35, done.
remote: Compressing objects: 100% (21/21), done.
remote: Total 35 (delta 2), reused 32 (delta 2), pack-reused 0
Unpacking objects: 100% (35/35), done.
From https://github.com/Thinkpositvie/chefrepo
 * branch            HEAD       -> FETCH_HEAD
[root@ip-172-31-64-176 ~]# ls
chefdk-1.5.0-1.el6.x86_64.rpm  chef-repo  chef-starter.zip  nag  README.md
[root@ip-172-31-64-176 ~]# rm chefdk-1.5.0-1.el6.x86_64.rpm
rm: remove regular file chefdk-1.5.0-1.el6.x86_64.rpm? ^C
[root@ip-172-31-64-176 ~]# cd chef-repo/
[root@ip-172-31-64-176 chef-repo]# knife client list
WARN: Failed to read the private key /root/chef-repo/.chef/nag9991.pem: #<Errno::ENOENT: No such file or directory @ rb_sysopen - /root/chef-repo/.chef/nag9991.pem>
ERROR: Your private key could not be loaded from /root/chef-repo/.chef/nag9991.pem
Check your configuration file and ensure that your private key is readable
[root@ip-172-31-64-176 chef-repo]# cd ..
[root@ip-172-31-64-176 ~]# rm -rf chef-repo/
[root@ip-172-31-64-176 ~]# unzip chef-starter.zip
Archive:  chef-starter.zip
   creating: chef-repo/cookbooks/
  inflating: chef-repo/cookbooks/chefignore
   creating: chef-repo/cookbooks/starter/
   creating: chef-repo/cookbooks/starter/files/
   creating: chef-repo/cookbooks/starter/files/default/
  inflating: chef-repo/cookbooks/starter/files/default/sample.txt
  inflating: chef-repo/cookbooks/starter/metadata.rb
   creating: chef-repo/cookbooks/starter/attributes/
  inflating: chef-repo/cookbooks/starter/attributes/default.rb
   creating: chef-repo/cookbooks/starter/templates/
   creating: chef-repo/cookbooks/starter/templates/default/
  inflating: chef-repo/cookbooks/starter/templates/default/sample.erb
   creating: chef-repo/cookbooks/starter/recipes/
  inflating: chef-repo/cookbooks/starter/recipes/default.rb
  inflating: chef-repo/README.md
  inflating: chef-repo/.gitignore
   creating: chef-repo/.chef/
   creating: chef-repo/roles/
  inflating: chef-repo/.chef/knife.rb
  inflating: chef-repo/roles/starter.rb
  inflating: chef-repo/.chef/nag9991.pem
[root@ip-172-31-64-176 ~]# cd chef-repo/
[root@ip-172-31-64-176 chef-repo]# knife client list
client
node
node1
node2
node3
node4
test5179-validator
[root@ip-172-31-64-176 chef-repo]# knife nodelist
FATAL: Cannot find subcommand for: 'nodelist'
Available subcommands: (for details, knife SUB-COMMAND --help)

** OPSCODE PRIVATE CHEF ORGANIZATION MANAGEMENT COMMANDS **
knife opc org create ORG_SHORT_NAME ORG_FULL_NAME (options)
knife opc org delete ORG_NAME
knife opc org edit ORG
knife opc org list
knife opc org show ORGNAME
knife opc org user add ORG_NAME USER_NAME
knife opc org user remove ORG_NAME USER_NAME
knife opc user create USERNAME FIRST_NAME [MIDDLE_NAME] LAST_NAME EMAIL PASSWORD
knife opc user delete USERNAME [-d]
knife opc user edit USERNAME
knife opc user list
knife opc user password USERNAME [PASSWORD | --enable-external-auth]
knife opc user show USERNAME

** BOOTSTRAP COMMANDS **
knife bootstrap [SSH_USER@]FQDN (options)
knife bootstrap windows ssh FQDN (options)
knife bootstrap windows winrm FQDN (options)

** CLIENT COMMANDS **
knife client bulk delete REGEX (options)
knife client create CLIENTNAME (options)
knife client delete [CLIENT[,CLIENT]] (options)
knife client edit CLIENT (options)
Usage: /usr/bin/knife (options)
knife client key delete CLIENT KEYNAME (options)
knife client key edit CLIENT KEYNAME (options)
knife client key list CLIENT (options)
knife client key show CLIENT KEYNAME (options)
knife client list (options)
knife client reregister CLIENT (options)
knife client show CLIENT (options)

** CONFIGURE COMMANDS **
knife configure (options)
knife configure client DIRECTORY

** COOKBOOK COMMANDS **
knife cookbook bulk delete REGEX (options)
knife cookbook create COOKBOOK (options)
knife cookbook delete COOKBOOK VERSION (options)
knife cookbook download COOKBOOK [VERSION] (options)
knife cookbook list (options)
knife cookbook metadata COOKBOOK (options)
knife cookbook metadata from FILE (options)
knife cookbook show COOKBOOK [VERSION] [PART] [FILENAME] (options)
knife cookbook test [COOKBOOKS...] (options)
knife cookbook upload [COOKBOOKS...] (options)

** COOKBOOK SITE COMMANDS **
knife cookbook site download COOKBOOK [VERSION] (options)
knife cookbook site install COOKBOOK [VERSION] (options)
knife cookbook site list (options)
knife cookbook site search QUERY (options)
knife cookbook site share COOKBOOK [CATEGORY] (options)
knife cookbook site show COOKBOOK [VERSION] (options)
knife cookbook site unshare COOKBOOK

** DATA BAG COMMANDS **
knife data bag create BAG [ITEM] (options)
knife data bag delete BAG [ITEM] (options)
knife data bag edit BAG ITEM (options)
knife data bag from file BAG FILE|FOLDER [FILE|FOLDER..] (options)
knife data bag list (options)
knife data bag show BAG [ITEM] (options)

** DECRYPT COMMANDS **
knife decrypt VAULT ITEM [VALUES] (options)

** EC2 COMMANDS **
knife ec2 amis ubuntu DISTRO [TYPE] (options)

** ENCRYPT COMMANDS **
knife encrypt create VAULT ITEM VALUES (options)
knife encrypt delete VAULT ITEM (options)
knife encrypt remove VAULT ITEM VALUES (options)
knife encrypt rotate keys VAULT ITEM (options)
knife encrypt update VAULT ITEM VALUES (options)

** ENVIRONMENT COMMANDS **
knife environment compare [ENVIRONMENT..] (options)
knife environment create ENVIRONMENT (options)
knife environment delete ENVIRONMENT (options)
knife environment edit ENVIRONMENT (options)
knife environment from file FILE [FILE..] (options)
knife environment list (options)
knife environment show ENVIRONMENT (options)

** EXEC COMMANDS **
knife exec [SCRIPT] (options)

** HELP COMMANDS **
knife help [list|TOPIC]

** INDEX COMMANDS **
knife index rebuild (options)

** JOB COMMANDS **
knife job list
knife job output <job id> <node> [<node> ...]
knife job start <command> [<node> <node> ...]
knife job status <job id>

** KNIFE COMMANDS **
Usage: /usr/bin/knife (options)

** NODE COMMANDS **
knife node bulk delete REGEX (options)
knife node create NODE (options)
knife node delete [NODE[,NODE]] (options)
knife node edit NODE (options)
knife node environment set NODE ENVIRONMENT
knife node from file FILE (options)
knife node list (options)
knife node run_list add [NODE] [ENTRY[,ENTRY]] (options)
knife node run_list remove [NODE] [ENTRY[,ENTRY]] (options)
knife node run_list set NODE ENTRIES (options)
knife node show NODE (options)
knife node status [<node> <node> ...]

** NULL COMMANDS **
knife null

** OSC COMMANDS **
knife osc_user create USER (options)
knife osc_user delete USER (options)
knife osc_user edit USER (options)
knife osc_user list (options)
knife osc_user reregister USER (options)
knife osc_user show USER (options)

** PATH-BASED COMMANDS **
knife delete [PATTERN1 ... PATTERNn]
knife deps PATTERN1 [PATTERNn]
knife diff PATTERNS
knife download PATTERNS
knife edit [PATTERN1 ... PATTERNn]
knife list [-dfR1p] [PATTERN1 ... PATTERNn]
knife show [PATTERN1 ... PATTERNn]
knife upload PATTERNS
knife xargs [COMMAND]

** RAW COMMANDS **
knife raw REQUEST_PATH

** RECIPE COMMANDS **
knife recipe list [PATTERN]

** REHASH COMMANDS **
knife rehash

** ROLE COMMANDS **
knife role bulk delete REGEX (options)
knife role create ROLE (options)
knife role delete ROLE (options)
knife role edit ROLE (options)
knife role env_run_list add [ROLE] [ENVIRONMENT] [ENTRY[,ENTRY]] (options)
knife role env_run_list clear [ROLE] [ENVIRONMENT]
knife role env_run_list remove [ROLE] [ENVIRONMENT] [ENTRIES]
knife role env_run_list replace [ROLE] [ENVIRONMENT] [OLD_ENTRY] [NEW_ENTRY]
knife role env_run_list set [ROLE] [ENVIRONMENT] [ENTRIES]
knife role from file FILE [FILE..] (options)

knife spork info
knife spork node create NODE (options)
knife spork node delete NODE (options)
knife spork node edit NODE (options)
knife spork node from file FILE (options)
knife spork node run_list add [NODE] [ENTRY[,ENTRY]] (options)
knife spork node run_list add [NODE] [ENTRY[,ENTRY]] (options)
knife spork node run_list set NODE ENTRIES (options)
knife spork omni COOKBOOK (options)
knife spork promote ENVIRONMENT COOKBOOK (options)
knife spork role create ROLE (options)
knife spork role delete ROLENAME (options)
knife spork role edit ROLENAME (options)
knife spork role from file FILENAME (options)
knife spork upload [COOKBOOKS...] (options)

** SSH COMMANDS **
knife ssh QUERY COMMAND (options)

** SSL COMMANDS **
knife ssl check [URL] (options)
knife ssl fetch [URL] (options)

** STATUS COMMANDS **
knife status QUERY (options)

** SUPERMARKET COMMANDS **
knife supermarket download COOKBOOK [VERSION] (options)
knife supermarket install COOKBOOK [VERSION] (options)
knife supermarket list (options)
knife supermarket search QUERY (options)
knife supermarket share COOKBOOK [CATEGORY] (options)
knife supermarket show COOKBOOK [VERSION] (options)
knife supermarket unshare COOKBOOK (options)

** TAG COMMANDS **
knife tag create NODE TAG ...
knife tag delete NODE TAG ...
knife tag list NODE

** USER COMMANDS **
knife user create USERNAME DISPLAY_NAME FIRST_NAME LAST_NAME EMAIL PASSWORD (options)
knife user delete USER (options)
knife user edit USER (options)
knife user key create USER (options)
knife user key delete USER KEYNAME (options)
knife user key edit USER KEYNAME (options)
knife user key list USER (options)
knife user key show USER KEYNAME (options)
knife user list (options)
knife user reregister USER (options)
knife user show USER (options)

** VAULT COMMANDS **
knife vault create VAULT ITEM VALUES (options)
knife vault decrypt VAULT ITEM [VALUES] (options)
knife vault delete VAULT ITEM (options)
knife vault download VAULT ITEM PATH (options)
knife vault edit VAULT ITEM (options)
knife vault isvault VAULT ITEM (options)
knife vault itemtype VAULT ITEM (options)
knife vault list (options)
knife vault refresh VAULT ITEM
knife vault remove VAULT ITEM VALUES (options)
knife vault rotate all keys
knife vault rotate keys VAULT ITEM (options)
knife vault show VAULT [ITEM] [VALUES] (options)
knife vault update VAULT ITEM VALUES (options)

** WINDOWS COMMANDS **
knife windows cert generate FILE_PATH (options)
knife windows cert install CERT [CERT] (options)
knife bootstrap windows winrm FQDN (options)
knife bootstrap windows ssh FQDN (options)
knife winrm QUERY COMMAND (options)
knife wsman test QUERY (options)
knife windows listener create (options)

** WINRM COMMANDS **
knife winrm QUERY COMMAND (options)

** WSMAN COMMANDS **
knife wsman test QUERY (options)

[root@ip-172-31-64-176 chef-repo]# knife nodelist
FATAL: Cannot find subcommand for: 'nodelist'
Available subcommands: (for details, knife SUB-COMMAND --help)

** OPSCODE PRIVATE CHEF ORGANIZATION MANAGEMENT COMMANDS **
knife opc org create ORG_SHORT_NAME ORG_FULL_NAME (options)
knife opc org delete ORG_NAME
knife opc org edit ORG
knife opc org list
knife opc org show ORGNAME
knife opc org user add ORG_NAME USER_NAME
knife opc org user remove ORG_NAME USER_NAME
knife opc user create USERNAME FIRST_NAME [MIDDLE_NAME] LAST_NAME EMAIL PASSWORD
knife opc user delete USERNAME [-d]
knife opc user edit USERNAME
knife opc user list
knife opc user password USERNAME [PASSWORD | --enable-external-auth]
knife opc user show USERNAME

** BOOTSTRAP COMMANDS **
knife bootstrap [SSH_USER@]FQDN (options)
knife bootstrap windows ssh FQDN (options)
knife bootstrap windows winrm FQDN (options)

** CLIENT COMMANDS **
knife client bulk delete REGEX (options)
knife client create CLIENTNAME (options)
knife client delete [CLIENT[,CLIENT]] (options)
knife client edit CLIENT (options)
Usage: /usr/bin/knife (options)
knife client key delete CLIENT KEYNAME (options)
knife client key edit CLIENT KEYNAME (options)
knife client key list CLIENT (options)
knife client key show CLIENT KEYNAME (options)
knife client list (options)
knife client reregister CLIENT (options)
knife client show CLIENT (options)

** CONFIGURE COMMANDS **
knife configure (options)
knife configure client DIRECTORY

** COOKBOOK COMMANDS **
knife cookbook bulk delete REGEX (options)
knife cookbook create COOKBOOK (options)
knife cookbook delete COOKBOOK VERSION (options)
knife cookbook download COOKBOOK [VERSION] (options)
knife cookbook list (options)
knife cookbook metadata COOKBOOK (options)
knife cookbook metadata from FILE (options)
knife cookbook show COOKBOOK [VERSION] [PART] [FILENAME] (options)
knife cookbook test [COOKBOOKS...] (options)
knife cookbook upload [COOKBOOKS...] (options)

** COOKBOOK SITE COMMANDS **
knife cookbook site download COOKBOOK [VERSION] (options)
knife cookbook site install COOKBOOK [VERSION] (options)
knife cookbook site list (options)
knife cookbook site search QUERY (options)
knife cookbook site share COOKBOOK [CATEGORY] (options)
knife cookbook site show COOKBOOK [VERSION] (options)
knife cookbook site unshare COOKBOOK

** DATA BAG COMMANDS **
knife data bag create BAG [ITEM] (options)
knife data bag delete BAG [ITEM] (options)
knife data bag edit BAG ITEM (options)
knife data bag from file BAG FILE|FOLDER [FILE|FOLDER..] (options)
knife data bag list (options)
knife data bag show BAG [ITEM] (options)

** DECRYPT COMMANDS **
knife decrypt VAULT ITEM [VALUES] (options)

** EC2 COMMANDS **
knife ec2 amis ubuntu DISTRO [TYPE] (options)

** ENCRYPT COMMANDS **
knife encrypt create VAULT ITEM VALUES (options)
knife encrypt delete VAULT ITEM (options)
knife encrypt remove VAULT ITEM VALUES (options)
knife encrypt rotate keys VAULT ITEM (options)
knife encrypt update VAULT ITEM VALUES (options)

** ENVIRONMENT COMMANDS **
knife environment compare [ENVIRONMENT..] (options)
knife environment create ENVIRONMENT (options)
knife environment delete ENVIRONMENT (options)
knife environment edit ENVIRONMENT (options)
knife environment from file FILE [FILE..] (options)
knife environment list (options)
knife environment show ENVIRONMENT (options)

** EXEC COMMANDS **
knife exec [SCRIPT] (options)

** HELP COMMANDS **
knife help [list|TOPIC]

** INDEX COMMANDS **
knife index rebuild (options)

** JOB COMMANDS **
knife job list
knife job output <job id> <node> [<node> ...]
knife job start <command> [<node> <node> ...]
knife job status <job id>

** KNIFE COMMANDS **
Usage: /usr/bin/knife (options)


[root@ip-172-31-64-176 chef-repo]# knife node list
client
[root@ip-172-31-64-176 chef-repo]# knife cookbook list
apache21       0.4.0
apacheserver   0.4.0
apt            6.1.2
attiribute     0.1.0
chefcode       0.2.0
demo           0.1.0
demo7am        0.3.0
demo7am1       0.1.0
demo9am        0.2.0
docker         2.15.29
docker1        0.1.0
envi           0.1.0
first          0.1.0
homebrew       4.2.0
httpd1         0.1.0
jai            0.2.0
java           1.50.0
job            0.3.0
nag            0.1.0
newlife        0.22.0
ohai           5.1.0
prac1          0.1.0
role           0.1.0
sample         0.2.0
sample1        0.2.0
test           0.1.0
test1          0.1.0
tomcat7        0.1.2
web            0.1.0
webdemo        0.5.0
windows        3.1.1
[root@ip-172-31-64-176 chef-repo]# knife cookbook create think
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook think in /root/chef-repo/cookbooks
** Creating README for cookbook: think
** Creating CHANGELOG for cookbook: think
** Creating metadata for cookbook: think
[root@ip-172-31-64-176 chef-repo]# git init
Initialized empty Git repository in /root/chef-repo/.git/
[root@ip-172-31-64-176 chef-repo]# cd cookbooks/
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd think/
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook delete think
Do you really want to delete think version 0.1.0? (Y/N) y
Deleted cookbook[think version 0.1.0]
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cp /home/ec2-user/shell.pem /root/
[root@ip-172-31-64-176 recipes]# knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
ERROR: Must pass an FQDN or ip to bootstrap
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216--sudo
ERROR: Network Error: getaddrinfo: Name or service not known
Check your knife configuration and network settings
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Installing Chef Omnibus (-v 12)
54.243.15.216 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.243.15.216   to file /tmp/install.sh.1531/install.sh
54.243.15.216 trying wget...
54.243.15.216 ubuntu 16.04 x86_64
54.243.15.216 Getting information for chef stable 12 for ubuntu...
54.243.15.216 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=ubuntu&pv=16.04&m=x86_64
54.243.15.216   to file /tmp/install.sh.1535/metadata.txt
54.243.15.216 trying wget...
54.243.15.216 sha1      b21baa643ef453f488351cd5623756e19ebec749
54.243.15.216 sha256    f2320ba894d92e4fd8fbae81546a70f124754cd40be388ba44de8180fbc2ea4d
54.243.15.216 url       https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216 version   12.21.26
54.243.15.216 downloaded metadata file looks valid...
54.243.15.216 downloading https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216   to file /tmp/install.sh.1535/chef_12.21.26-1_amd64.deb
54.243.15.216 trying wget...
54.243.15.216 Comparing checksum with sha256sum...
54.243.15.216 Installing chef 12
54.243.15.216 installing with dpkg...
54.243.15.216 Selecting previously unselected package chef.
(Reading database ... 51071 files and directories currently installed.)
54.243.15.216 Preparing to unpack .../chef_12.21.26-1_amd64.deb ...
54.243.15.216 Unpacking chef (12.21.26-1) ...
54.243.15.216 Setting up chef (12.21.26-1) ...
54.243.15.216 Thank you for installing Chef!
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Chef-client pid: 1617
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Setting the run_list to [] from CLI options
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List is []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List expands to []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Loading cookbooks []
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:26:44+00:00] WARN: Node positive has an empty run list.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 0 resources
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Chef Run complete in 0.376994307 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/0 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Sending resource update report (run-id: 27d1ea9d-6d56-4b69-b56b-a9fbd53639a2)
[root@ip-172-31-64-176 recipes]# knife node run list add positive think
positive:
  run_list: recipe[think]
[root@ip-172-31-64-176 recipes]# history
    1  ping in.com
    2  cat /etc/issue
    3  git --version
    4  wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
    5  rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
    6  git pull https://github.com/Thinkpositvie/chefrepo.git
    7  git init
    8  git pull https://github.com/Thinkpositvie/chefrepo.git
    9  ls
   10  rm chefdk-1.5.0-1.el6.x86_64.rpm
   11  cd chef-repo/
   12  knife client list
   13  cd ..
   14  rm -rf chef-repo/
   15  unzip chef-starter.zip
   16  cd chef-repo/
   17  knife client list
   18  knife nodelist
   19  knife node list
   20  knife cookbook list
   21  knife cookbook create think
   22  git init
   23  cd cookbooks/
   24  ls
   25  cd think/
   26  ls
   27  cd recipes/
   28  ls
   29  vi default.rb
   30  knife cookbook test think
   31  knife cookbook upload  think
   32  knife cookbook delete think
   33  knife cookbook upload  think
   34  cp /home/ec2-user/shell.pem /root/
   35  knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
   36  knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
   37  knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
   38  knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
   39*
   40  history
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Chef-client pid: 2283
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 1 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:31:50+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Chef Run complete in 0.35214713 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/1 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Sending resource update report (run-id: 98d0ef36-6c0a-437c-9512-d01f270454f4)
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Chef-client pid: 2645
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 2 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:32:30+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216   * linux_user[nag] action create[2017-11-11T05:32:30+00:00] INFO: Processing linux_user[nag] action create (think::default line 19)
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: linux_user[nag] created
54.243.15.216
54.243.15.216     - create user nag
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Chef Run complete in 0.472534973 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 1/2 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Sending resource update report (run-id: 28dabc85-fa7c-4b96-912a-d207c3096afe)







root@ip-172-31-74-199:~# chef-client -o think@0.220.0
[2017-11-11T05:49:58+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:49:58+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:49:58+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:49:58+00:00] INFO: Chef-client pid: 2968
[2017-11-11T05:49:58+00:00] INFO: The plugin path /etc/chef/ohai/plugins does no                                                                                        t exist. Skipping...
[2017-11-11T05:50:00+00:00] WARN: Run List override has been provided.
[2017-11-11T05:50:00+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:50:00+00:00] WARN: Overridden Run List: [recipe[think@0.220.0]]
[2017-11-11T05:50:00+00:00] INFO: Run List is [recipe[think@0.220.0]]
[2017-11-11T05:50:00+00:00] INFO: Run List expands to [think@0.220.0]
[2017-11-11T05:50:00+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:50:00+00:00] INFO: Running start handlers
[2017-11-11T05:50:00+00:00] INFO: Start handlers complete.
[2017-11-11T05:50:00+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:50:00+00:00] INFO: Error while reporting run start to Data Collec                                                                                        tor. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 4                                                                                        04 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.220.0"]
[2017-11-11T05:50:00+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T05:50:00+00:00] INFO: Skipping removal of obsoleted cookbooks from t                                                                                        he cache
Synchronizing Cookbooks:
[2017-11-11T05:50:00+00:00] INFO: Storing updated cookbooks/think/recipes/defaul                                                                                        t.rb in the cache.
[2017-11-11T05:50:00+00:00] INFO: Storing updated cookbooks/think/metadata.rb in                                                                                         the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/think/recipes/default.rb
================================================================================

NoMethodError
-------------
undefined method `content' for Chef::Resource::Directory

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/think/recipes/default.rb:15:in `block in from_file'
  /var/chef/cache/cookbooks/think/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/think/recipes/default.rb:

  8:  #
  9:
 10:
 11:  directory  "/root/chef"do
 12:
 13:  action :create
 14:
 15>> content "hello welcome to chef world"
 16:
 17:  end
 18:
 19:  file '/root/chef/nagendra'do
 20:
 21:  action :create
 22:
 23:  content "welcomet devops world"
 24:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=2963;start=05:49:58;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T05:50:00+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T05:50:00+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T05:50:00+00:00] INFO: Sending resource update report (run-id: ed0c5b                                                                                        8d-9b7c-46a7-b10b-5111104813df)
[2017-11-11T05:50:00+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-sta                                                                                        cktrace.out
[2017-11-11T05:50:00+00:00] FATAL: Please provide the contents of the stacktrace                                                                                        .out file if you file a bug report
[2017-11-11T05:50:00+00:00] ERROR: undefined method `content' for Chef::Resource                                                                                        ::Directory
[2017-11-11T05:50:00+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef ru                                                                                        n process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.220.0
[2017-11-11T05:52:15+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:52:15+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:52:15+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:52:15+00:00] INFO: Chef-client pid: 3276
[2017-11-11T05:52:15+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T05:52:17+00:00] WARN: Run List override has been provided.
[2017-11-11T05:52:17+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:52:17+00:00] WARN: Overridden Run List: [recipe[think@0.220.0]]
[2017-11-11T05:52:17+00:00] INFO: Run List is [recipe[think@0.220.0]]
[2017-11-11T05:52:17+00:00] INFO: Run List expands to [think@0.220.0]
[2017-11-11T05:52:17+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:52:17+00:00] INFO: Running start handlers
[2017-11-11T05:52:17+00:00] INFO: Start handlers complete.
[2017-11-11T05:52:17+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:52:17+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.220.0"]
[2017-11-11T05:52:17+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T05:52:17+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T05:52:17+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T05:52:17+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 3 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T05:52:17+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/chef/nagendra] action create[2017-11-11T05:52:17+00:00] INFO: Processing file[/root/chef/nagendra] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'file[/root/chef/nagendra]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: file '/root/chef/nagendra'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    file("/root/chef/nagendra") do
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      declared_type :file
      cookbook_name "think"
      recipe_name "default"
      content "welcomet devops world"
      path "/root/chef/nagendra"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=3271;start=05:52:15;
    executable=/opt/chef/bin/chef-client

[2017-11-11T05:52:17+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T05:52:17+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T05:52:17+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T05:52:17+00:00] INFO: Sending resource update report (run-id: c8a274fa-e1ef-4a98-bc11-ab24dbf3a0eb)
[2017-11-11T05:52:17+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T05:52:17+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T05:52:17+00:00] ERROR: file[/root/chef/nagendra] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T05:52:17+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# ls /root/
chef
root@ip-172-31-74-199:~# chef-client -o think@0.220.0
[2017-11-11T05:54:15+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:54:15+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:54:15+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:54:15+00:00] INFO: Chef-client pid: 3586
[2017-11-11T05:54:15+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T05:54:17+00:00] WARN: Run List override has been provided.
[2017-11-11T05:54:17+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:54:17+00:00] WARN: Overridden Run List: [recipe[think@0.220.0]]
[2017-11-11T05:54:17+00:00] INFO: Run List is [recipe[think@0.220.0]]
[2017-11-11T05:54:17+00:00] INFO: Run List expands to [think@0.220.0]
[2017-11-11T05:54:17+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:54:17+00:00] INFO: Running start handlers
[2017-11-11T05:54:17+00:00] INFO: Start handlers complete.
[2017-11-11T05:54:17+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:54:17+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.220.0"]
[2017-11-11T05:54:17+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T05:54:17+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T05:54:17+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T05:54:17+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 3 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T05:54:17+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T05:54:17+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
[2017-11-11T05:54:17+00:00] INFO: file[/root/nag] created file /root/nag

    - create new file /root/nag[2017-11-11T05:54:17+00:00] INFO: file[/root/nag] updated file contents /root/nag

    - update content in file /root/nag from none to 2c8a11
    --- /root/nag       2017-11-11 05:54:17.283708618 +0000
    +++ /root/.chef-nag20171111-3586-vuvphn     2017-11-11 05:54:17.283708618 +0000
    @@ -1 +1,2 @@
    +welcomet devops world
  * linux_user[nagendra] action create[2017-11-11T05:54:17+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
[2017-11-11T05:54:17+00:00] INFO: linux_user[nagendra] created

    - create user nagendra
[2017-11-11T05:54:17+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T05:54:17+00:00] INFO: Chef Run complete in 0.224890344 seconds
[2017-11-11T05:54:17+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T05:54:17+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T05:54:17+00:00] INFO: Report handlers complete
Chef Client finished, 2/3 resources updated in 01 seconds
[2017-11-11T05:54:17+00:00] INFO: Sending resource update report (run-id: c4ca27c5-4813-4c29-b424-61405014c7e1)



code 3:

root@ip-172-31-74-199:~# chef-client -o think@0.3.0
[2017-11-11T05:57:27+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:57:27+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:57:27+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:57:27+00:00] INFO: Chef-client pid: 3900
[2017-11-11T05:57:27+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T05:57:28+00:00] WARN: Run List override has been provided.
[2017-11-11T05:57:28+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:57:28+00:00] WARN: Overridden Run List: [recipe[think@0.3.0]]
[2017-11-11T05:57:28+00:00] INFO: Run List is [recipe[think@0.3.0]]
[2017-11-11T05:57:28+00:00] INFO: Run List expands to [think@0.3.0]
[2017-11-11T05:57:28+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:57:28+00:00] INFO: Running start handlers
[2017-11-11T05:57:28+00:00] INFO: Start handlers complete.
[2017-11-11T05:57:28+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:57:28+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.3.0"]
[2017-11-11T05:57:28+00:00] INFO: Loading cookbooks [think@0.3.0]
[2017-11-11T05:57:28+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T05:57:28+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T05:57:29+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
  - think (0.3.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T05:57:29+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 4 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T05:57:29+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T05:57:29+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
 (up to date)
  * linux_user[nagendra] action create[2017-11-11T05:57:29+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
 (up to date)
  * apt_package[apache2] action install[2017-11-11T05:57:29+00:00] INFO: Processing apt_package[apache2] action install (think::default line 33)
[2017-11-11T05:57:39+00:00] INFO: apt_package[apache2] installed apache2 at 2.4.18-2ubuntu3.5

    - install version 2.4.18-2ubuntu3.5 of package apache2
[2017-11-11T05:57:39+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T05:57:39+00:00] INFO: Chef Run complete in 10.236128516 seconds
[2017-11-11T05:57:39+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T05:57:39+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T05:57:39+00:00] INFO: Report handlers complete
Chef Client finished, 1/4 resources updated in 11 seconds
[2017-11-11T05:57:39+00:00] INFO: Sending resource update report (run-id: 5ab986af-6ac1-411c-8720-fb0a7389e23a)



2017-11-11T05:57:39+00:00] INFO: Report handlers complete
Chef Client finished, 1/4 resources updated in 11 seconds
[2017-11-11T05:57:39+00:00] INFO: Sending resource update report (run-id: 5ab986af-6ac1-411c-8720-fb0a7389e23a)
root@ip-172-31-74-199:~# chef-client -r think
[2017-11-11T06:08:23+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:08:23+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:08:23+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:08:23+00:00] INFO: Chef-client pid: 14853
[2017-11-11T06:08:23+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:08:24+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003f3db78 @version=nil, @type=:recipe, @name="think">] from CLI options
[2017-11-11T06:08:24+00:00] INFO: Run List is [recipe[think]]
[2017-11-11T06:08:24+00:00] INFO: Run List expands to [think]
[2017-11-11T06:08:24+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:08:24+00:00] INFO: Running start handlers
[2017-11-11T06:08:24+00:00] INFO: Start handlers complete.
[2017-11-11T06:08:24+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:08:24+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think"]
[2017-11-11T06:08:25+00:00] INFO: Loading cookbooks [think@0.220.0]
Synchronizing Cookbooks:
[2017-11-11T06:08:25+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T06:08:25+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:08:25+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 3 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T06:08:25+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T06:08:25+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
 (up to date)
  * linux_user[nagendra] action create[2017-11-11T06:08:25+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
 (up to date)
[2017-11-11T06:08:25+00:00] INFO: Chef Run complete in 0.874268957 seconds

Running handlers:
[2017-11-11T06:08:25+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:08:25+00:00] INFO: Report handlers complete
Chef Client finished, 0/3 resources updated in 02 seconds
[2017-11-11T06:08:25+00:00] INFO: Sending resource update report (run-id: 6cad4ba2-77ae-410b-8588-659b917769df)
root@ip-172-31-74-199:~# chef-client -r think@0.4.0
[2017-11-11T06:08:40+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:08:40+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:08:40+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:08:40+00:00] INFO: Chef-client pid: 15159
[2017-11-11T06:08:40+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:08:42+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000001ae04b0 @version="0.4.0", @type=:recipe, @name="think">] from CLI options
[2017-11-11T06:08:42+00:00] INFO: Run List is [recipe[think@0.4.0]]
[2017-11-11T06:08:42+00:00] INFO: Run List expands to [think@0.4.0]
[2017-11-11T06:08:42+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:08:42+00:00] INFO: Running start handlers
[2017-11-11T06:08:42+00:00] INFO: Start handlers complete.
[2017-11-11T06:08:42+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:08:42+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.4.0"]
[2017-11-11T06:08:42+00:00] INFO: Loading cookbooks [think@0.4.0]
Synchronizing Cookbooks:
[2017-11-11T06:08:42+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T06:08:42+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
  - think (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/think/recipes/default.rb
================================================================================

NoMethodError
-------------
undefined method `actiont' for Chef::Resource::Service

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/think/recipes/default.rb:41:in `block in from_file'
  /var/chef/cache/cookbooks/think/recipes/default.rb:39:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/think/recipes/default.rb:

 34:
 35:  action :install
 36:
 37:  end
 38:
 39:  service "apache2"do
 40:
 41>> actiont [ :enable, :start]
 42:
 43:  end
 44:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=15154;start=06:08:40;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T06:08:42+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T06:08:42+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T06:08:42+00:00] INFO: Sending resource update report (run-id: b280a923-e781-403d-b388-8501bd6c756f)
[2017-11-11T06:08:42+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T06:08:42+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T06:08:42+00:00] ERROR: undefined method `actiont' for Chef::Resource::Service
[2017-11-11T06:08:42+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r think@0.4.0
[2017-11-11T06:10:08+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:10:08+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:10:08+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:10:08+00:00] INFO: Chef-client pid: 15463
[2017-11-11T06:10:08+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:10:09+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x00000000046ab450 @version="0.4.0", @type=:recipe, @name="think">] from CLI options
[2017-11-11T06:10:09+00:00] INFO: Run List is [recipe[think@0.4.0]]
[2017-11-11T06:10:09+00:00] INFO: Run List expands to [think@0.4.0]
[2017-11-11T06:10:09+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:10:09+00:00] INFO: Running start handlers
[2017-11-11T06:10:09+00:00] INFO: Start handlers complete.
[2017-11-11T06:10:09+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:10:09+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.4.0"]
[2017-11-11T06:10:09+00:00] INFO: Loading cookbooks [think@0.4.0]
Synchronizing Cookbooks:
[2017-11-11T06:10:09+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:10:09+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T06:10:09+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T06:10:09+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
 (up to date)
  * linux_user[nagendra] action create[2017-11-11T06:10:09+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
 (up to date)
  * apt_package[apache2] action install[2017-11-11T06:10:09+00:00] INFO: Processing apt_package[apache2] action install (think::default line 33)
 (up to date)
  * service[apache2] action enable[2017-11-11T06:10:09+00:00] INFO: Processing service[apache2] action enable (think::default line 39)
 (up to date)
  * service[apache2] action start[2017-11-11T06:10:09+00:00] INFO: Processing service[apache2] action start (think::default line 39)
 (up to date)
[2017-11-11T06:10:09+00:00] INFO: Chef Run complete in 0.539883426 seconds

Running handlers:
[2017-11-11T06:10:09+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:10:09+00:00] INFO: Report handlers complete
Chef Client finished, 0/6 resources updated in 01 seconds
[2017-11-11T06:10:09+00:00] INFO: Sending resource update report (run-id: b0d62a78-5438-4a70-a03e-78759a6f3816)
root@ip-172-31-74-199:~# service apache2 status
? apache2.service - LSB: Apache2 web server
   Loaded: loaded (/etc/init.d/apache2; bad; vendor preset: enabled)
  Drop-In: /lib/systemd/system/apache2.service.d
           +-apache2-systemd.conf
   Active: active (running) since Sat 2017-11-11 05:57:38 UTC; 12min ago
     Docs: man:systemd-sysv-generator(8)
    Tasks: 55
   Memory: 6.5M
      CPU: 299ms
   CGroup: /system.slice/apache2.service
           +-14610 /usr/sbin/apache2 -k start
           +-14613 /usr/sbin/apache2 -k start
           +-14614 /usr/sbin/apache2 -k start

Nov 11 05:57:37 ip-172-31-74-199 systemd[1]: Starting LSB: Apache2 web server...
Nov 11 05:57:37 ip-172-31-74-199 apache2[14586]:  * Starting Apache httpd web server apache2
Nov 11 05:57:38 ip-172-31-74-199 apache2[14586]:  *
Nov 11 05:57:38 ip-172-31-74-199 systemd[1]: Started LSB: Apache2 web server.





































    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17217;start=09:01:54;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:01:56+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:01:56+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:01:56+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:01:56+00:00] INFO: Sending resource update report (run-id: 4076b61c-f83f-4478-b3a5-82cbf2d58962)
[2017-11-11T09:01:56+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:01:56+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:01:56+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:01:56+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:03:02+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:02+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:02+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:02+00:00] INFO: Chef-client pid: 17535
[2017-11-11T09:03:02+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:04+00:00] WARN: Run List override has been provided.
[2017-11-11T09:03:04+00:00] WARN: Original Run List: [recipe[package]]
[2017-11-11T09:03:04+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:04+00:00] INFO: Running start handlers
[2017-11-11T09:03:04+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:04+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:03:04+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:03:04+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:03:04+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17530;start=09:03:02;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:03:04+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:03:04+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:04+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:04+00:00] INFO: Sending resource update report (run-id: 03600e09-9eb8-4298-bb5f-90afe7adf9fe)
[2017-11-11T09:03:04+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:04+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:04+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:03:04+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r think::mul
[2017-11-11T09:03:47+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:47+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:47+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:47+00:00] INFO: Chef-client pid: 17853
[2017-11-11T09:03:47+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:48+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003bd3528 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:03:48+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:03:48+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:03:48+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:48+00:00] INFO: Running start handlers
[2017-11-11T09:03:48+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:48+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:48+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:03:49+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its is no longer in the cookbook manifest.
Synchronizing Cookbooks:
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=17848;start=09:03:47;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:03:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:49+00:00] INFO: Sending resource update report (run-id: e914560b-9be6-4d80-8234-51418eaf54ea)
[2017-11-11T09:03:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:03:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client
[2017-11-11T09:04:06+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:04:06+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:04:06+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:04:06+00:00] INFO: Chef-client pid: 18157
[2017-11-11T09:04:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:04:07+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T09:04:07+00:00] INFO: Run List expands to [package]
[2017-11-11T09:04:07+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:04:07+00:00] INFO: Running start handlers
[2017-11-11T09:04:07+00:00] INFO: Start handlers complete.
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:04:07+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T09:04:07+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * apt_package[httpd] action install[2017-11-11T09:04:07+00:00] INFO: Processing apt_package[httpd] action install (package::default line 11)


    ================================================================================
    Error executing action `install` on resource 'apt_package[httpd]'
    ================================================================================

    Chef::Exceptions::Package
    -------------------------
    httpd is a virtual package provided by multiple packages, you must explicitly select one

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/package/recipes/default.rb

     11: package "httpd"do
     12:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/package/recipes/default.rb:11:in `from_file'

    apt_package("httpd") do
      package_name "httpd"
      action [:install]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      declared_type :package
      cookbook_name "package"
      recipe_name "default"
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=18152;start=09:04:06;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:04:08+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:04:08+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:04:08+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:04:08+00:00] INFO: Sending resource update report (run-id: 736ce9e2-15c3-4ff2-b2ca-5b1ce07dd878)
[2017-11-11T09:04:08+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:04:08+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:04:08+00:00] ERROR: apt_package[httpd] (package::default line 11) had an error: Chef::Exceptions::Package: httpd is a virtual package provided by multiple packages, you must explicitly select one
[2017-11-11T09:04:08+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:05:43+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:05:43+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:05:43+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:05:43+00:00] INFO: Chef-client pid: 18477
[2017-11-11T09:05:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:05:44+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000004f9a908 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:05:44+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:05:44+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:05:44+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:05:44+00:00] INFO: Running start handlers
[2017-11-11T09:05:44+00:00] INFO: Start handlers complete.
[2017-11-11T09:05:44+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:05:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:05:44+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/ser.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/files/default/index.html from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/README.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/CHANGELOG.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18472;start=09:05:43;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:05:45+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:05:45+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:05:45+00:00] INFO: Sending resource update report (run-id: 7e63a2ba-67d2-4ab1-ba48-ce628989db75)
[2017-11-11T09:05:45+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:05:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:05:45+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:05:45+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:06:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:06:48+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:06:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:06:48+00:00] INFO: Chef-client pid: 18786
[2017-11-11T09:06:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:06:49+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x00000000035d6d78 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:06:49+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:06:49+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:06:49+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:06:49+00:00] INFO: Running start handlers
[2017-11-11T09:06:49+00:00] INFO: Start handlers complete.
[2017-11-11T09:06:49+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:06:49+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:06:49+00:00] INFO: Loading cookbooks [think@0.220.0]
Synchronizing Cookbooks:
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18781;start=09:06:48;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:06:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:06:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:06:49+00:00] INFO: Sending resource update report (run-id: f8b86f80-e4ec-4df2-9c31-728a2b8a3950)
[2017-11-11T09:06:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:06:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:06:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:06:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:07:08+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:07:08+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:07:08+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:07:08+00:00] INFO: Chef-client pid: 19089
[2017-11-11T09:07:08+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:07:09+00:00] WARN: Run List override has been provided.
[2017-11-11T09:07:09+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T09:07:09+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:07:09+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:07:09+00:00] INFO: Running start handlers
[2017-11-11T09:07:09+00:00] INFO: Start handlers complete.
[2017-11-11T09:07:09+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:07:09+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:07:10+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:07:10+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/templates/default/index.html.erb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/files/default/sample.war in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/mul.rb in the cache.
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:07:10+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:07:10+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:07:10+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=19084;start=09:07:08;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:07:10+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:07:10+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:07:10+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:07:10+00:00] INFO: Sending resource update report (run-id: c0b76063-6e31-40e2-a184-edf24fd6dabf)
[2017-11-11T09:07:10+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:07:10+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:07:10+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:07:10+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:18:39+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:18:39+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:18:39+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:18:39+00:00] INFO: Chef-client pid: 19400
[2017-11-11T09:18:39+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:18:40+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003d3a308 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:18:40+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:18:40+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:18:40+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:18:40+00:00] INFO: Running start handlers
[2017-11-11T09:18:40+00:00] INFO: Start handlers complete.
[2017-11-11T09:18:40+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:18:40+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:18:40+00:00] INFO: Loading cookbooks [multi@0.1.0]
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/templates/default/index.html.erb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/CHANGELOG.md in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/metadata.rb in the cache.
[2017-11-11T09:18:41+00:00] INFO: Storing updated cookbooks/multi/README.md in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name = apache2
 12:  service_name = apache2
 13:  document_root = "/var/www/hmtl"
 14:
 15:  if node [" paltform "] == "amazon"
 16:
 17:  package_name = httpd
 18:  service_name = httpd
 19:  document_root = "/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19395;start=09:18:39;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:18:41+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:18:41+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:18:41+00:00] INFO: Sending resource update report (run-id: 741df3b7-eb45-432e-8803-3d377633b0a4)
[2017-11-11T09:18:41+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:18:41+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:18:41+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:18:41+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:22:37+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:22:37+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:22:37+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:22:37+00:00] INFO: Chef-client pid: 19711
[2017-11-11T09:22:37+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:22:39+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003eb6d58 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:22:39+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:22:39+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:22:39+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:22:39+00:00] INFO: Running start handlers
[2017-11-11T09:22:39+00:00] INFO: Start handlers complete.
[2017-11-11T09:22:39+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:22:39+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:22:39+00:00] INFO: Loading cookbooks [multi@0.1.0]
Synchronizing Cookbooks:
[2017-11-11T09:22:39+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name=apache2
 12:  service_name=apache2
 13:  document_root="/var/www/hmtl"
 14:
 15:  if node["paltform"] == "amazon"
 16:
 17:  package_name=httpd
 18:  service_name=httpd
 19:  document_root="/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19706;start=09:22:37;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:22:39+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:22:39+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:22:39+00:00] INFO: Sending resource update report (run-id: 16f4ce9e-d444-46d0-9bfc-8bffca3ec73c)
[2017-11-11T09:22:39+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:22:39+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:22:39+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:22:39+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)



chef-bootstrap a node:


[root@ip-172-31-64-176 chef-repo]# knife cookbook create think
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook think in /root/chef-repo/cookbooks
** Creating README for cookbook: think
** Creating CHANGELOG for cookbook: think
** Creating metadata for cookbook: think
[root@ip-172-31-64-176 chef-repo]# git init
Initialized empty Git repository in /root/chef-repo/.git/
[root@ip-172-31-64-176 chef-repo]# cd cookbooks/
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd think/
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook delete think
Do you really want to delete think version 0.1.0? (Y/N) y
Deleted cookbook[think version 0.1.0]
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cp /home/ec2-user/shell.pem /root/
[root@ip-172-31-64-176 recipes]# knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
ERROR: Must pass an FQDN or ip to bootstrap
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216--sudo
ERROR: Network Error: getaddrinfo: Name or service not known
Check your knife configuration and network settings
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Installing Chef Omnibus (-v 12)
54.243.15.216 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.243.15.216   to file /tmp/install.sh.1531/install.sh
54.243.15.216 trying wget...
54.243.15.216 ubuntu 16.04 x86_64
54.243.15.216 Getting information for chef stable 12 for ubuntu...
54.243.15.216 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=ubuntu&pv=16.04&m=x86_64
54.243.15.216   to file /tmp/install.sh.1535/metadata.txt
54.243.15.216 trying wget...
54.243.15.216 sha1      b21baa643ef453f488351cd5623756e19ebec749
54.243.15.216 sha256    f2320ba894d92e4fd8fbae81546a70f124754cd40be388ba44de8180fbc2ea4d
54.243.15.216 url       https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216 version   12.21.26
54.243.15.216 downloaded metadata file looks valid...
54.243.15.216 downloading https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216   to file /tmp/install.sh.1535/chef_12.21.26-1_amd64.deb
54.243.15.216 trying wget...
54.243.15.216 Comparing checksum with sha256sum...
54.243.15.216 Installing chef 12
54.243.15.216 installing with dpkg...
54.243.15.216 Selecting previously unselected package chef.
(Reading database ... 51071 files and directories currently installed.)
54.243.15.216 Preparing to unpack .../chef_12.21.26-1_amd64.deb ...
54.243.15.216 Unpacking chef (12.21.26-1) ...
54.243.15.216 Setting up chef (12.21.26-1) ...
54.243.15.216 Thank you for installing Chef!
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Chef-client pid: 1617
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Setting the run_list to [] from CLI options
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List is []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List expands to []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Loading cookbooks []
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:26:44+00:00] WARN: Node positive has an empty run list.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 0 resources
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Chef Run complete in 0.376994307 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/0 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Sending resource update report (run-id: 27d1ea9d-6d56-4b69-b56b-a9fbd53639a2)
[root@ip-172-31-64-176 recipes]# knife node run list add positive think
positive:
  run_list: recipe[think]
[root@ip-172-31-64-176 recipes]# history
    1  ping in.com
    2  cat /etc/issue
    3  git --version
    4  wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
    5  rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
    6  git pull https://github.com/Thinkpositvie/chefrepo.git
    7  git init
    8  git pull https://github.com/Thinkpositvie/chefrepo.git
    9  ls
   10  rm chefdk-1.5.0-1.el6.x86_64.rpm
   11  cd chef-repo/
   12  knife client list
   13  cd ..
   14  rm -rf chef-repo/
   15  unzip chef-starter.zip
   16  cd chef-repo/
   17  knife client list
   18  knife nodelist
   19  knife node list
   20  knife cookbook list
   21  knife cookbook create think
   22  git init
   23  cd cookbooks/
   24  ls
   25  cd think/
   26  ls
   27  cd recipes/
   28  ls
   29  vi default.rb
   30  knife cookbook test think
   31  knife cookbook upload  think
   32  knife cookbook delete think
   33  knife cookbook upload  think
   34  cp /home/ec2-user/shell.pem /root/
   35  knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
   36  knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
   37  knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
   38  knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
   39*
   40  history
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Chef-client pid: 2283
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 1 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:31:50+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Chef Run complete in 0.35214713 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/1 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Sending resource update report (run-id: 98d0ef36-6c0a-437c-9512-d01f270454f4)
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Chef-client pid: 2645
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 2 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:32:30+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216   * linux_user[nag] action create[2017-11-11T05:32:30+00:00] INFO: Processing linux_user[nag] action create (think::default line 19)
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: linux_user[nag] created
54.243.15.216
54.243.15.216     - create user nag
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Chef Run complete in 0.472534973 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 1/2 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Sending resource update report (run-id: 28dabc85-fa7c-4b96-912a-d207c3096afe)
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd -
/root/chef-repo/cookbooks/think/recipes
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think@0.2.0
ERROR: Could not find cookbook think@0.2.0 in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.3.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# vi  metadata.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# chef-client -o think@0.4.0
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] WARN: Did not find config file: /etc/chef/client.rb, using command line options.
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.2
[2017-11-11T06:09:48+00:00] INFO: *** Chef 12.21.2 ***
[2017-11-11T06:09:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:09:48+00:00] INFO: Chef-client pid: 3372
[2017-11-11T06:09:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
Creating a new client identity for ip-172-31-64-176.ec2.internal using the validator key.
[2017-11-11T06:09:50+00:00] INFO: Client key /etc/chef/client.pem is not present - registering

================================================================================
Chef encountered an error attempting to create the client "ip-172-31-64-176.ec2.internal"
================================================================================

System Info:
------------
chef_version=12.21.2
ruby=ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]
program_name=chef-client worker: ppid=3367;start=06:09:48;
executable=/opt/chefdk/bin/chef-client


Running handlers:
[2017-11-11T06:09:50+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T06:09:50+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T06:09:50+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T06:09:50+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T06:09:50+00:00] ERROR: I can't write your private key to /etc/chef/client.pem - check permissions?
[2017-11-11T06:09:50+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 think]# clear
[root@ip-172-31-64-176 think]# lss
-bash: lss: command not found
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# wget https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
--2017-11-11 06:15:12--  https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
Resolving tomcat.apache.org (tomcat.apache.org)... 140.211.11.105, 195.154.151.36, 2001:bc8:2142:300::
Connecting to tomcat.apache.org (tomcat.apache.org)|140.211.11.105|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4606 (4.5K)
Saving to: sample.war

sample.war                                100%[=====================================================================================>]   4.50K  --.-KB/s    in 0s

2017-11-11 06:15:13 (277 MB/s) - sample.war saved [4606/4606]

[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  sample.war  templates
[root@ip-172-31-64-176 think]# mv sample.war files/default/
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd -
/root/chef-repo/cookbooks/think
[root@ip-172-31-64-176 think]# cd files/
[root@ip-172-31-64-176 files]# ls
default
[root@ip-172-31-64-176 files]# cd default/
[root@ip-172-31-64-176 default]# ls
sample.war
[root@ip-172-31-64-176 default]# cd ..
[root@ip-172-31-64-176 files]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# cd..
-bash: cd..: command not found
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# knife cookbook create package
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook package in /root/chef-repo/cookbooks
** Creating README for cookbook: package
** Creating CHANGELOG for cookbook: package
** Creating metadata for cookbook: package
[root@ip-172-31-64-176 cookbooks]# cd  package
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 package]# vi metadata.rb
[root@ip-172-31-64-176 package]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239
ERROR: You must pass a node name with -N when bootstrapping with user credentials
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Installing Chef Omnibus (-v 12)
54.172.193.239 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.172.193.239   to file /tmp/install.sh.2760/install.sh
54.172.193.239 trying wget...
54.172.193.239 el 6 x86_64
54.172.193.239 Getting information for chef stable 12 for el...
54.172.193.239 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=el&pv=6&m=x86_64
54.172.193.239   to file /tmp/install.sh.2765/metadata.txt
54.172.193.239 trying wget...
54.172.193.239 sha1     e1f7d3c6ee99aedeac4ad8a950877af7edc8164c
54.172.193.239 sha256   6a47f8f88d3f4568defa13076a21a005bd48ee3e7100d3c66d8f0cc41554306e
54.172.193.239 url      https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 version  12.21.26
54.172.193.239 downloaded metadata file looks valid...
54.172.193.239 downloading https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239   to file /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 trying wget...
54.172.193.239 Comparing checksum with sha256sum...
54.172.193.239 Installing chef 12
54.172.193.239 installing with rpm...
54.172.193.239 warning: /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
54.172.193.239 Preparing...                          ################################# [100%]
54.172.193.239 Updating / installing...
54.172.193.239    1:chef-12.21.26-1.el6              ################################# [100%]
54.172.193.239 Thank you for installing Chef!
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Chef-client pid: 2837
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:37:38+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239 [2017-11-11T06:37:39+00:00] INFO: yum_package[httpd] installing httpd-2.2.34-1.16.amzn1 from amzn-updates repository
54.172.193.239 [2017-11-11T06:37:42+00:00] INFO: yum_package[httpd] installed httpd at 2.2.34-1.16.amzn1
54.172.193.239
54.172.193.239     - install version 2.2.34-1.16.amzn1 of package httpd
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Chef Run complete in 4.65663913 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/1 resources updated in 06 seconds
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Sending resource update report (run-id: c510a08d-e543-4dd9-99bf-989681c02f82)
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi ser.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
==============================================================================================



node 2:



root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
[root@ip-172-31-64-176 recipes]# cp ser.rb default.rb
cp: overwrite default.rb? n
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Chef-client pid: 4334
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:49:30+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Chef Run complete in 1.424903929 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Sending resource update report (run-id: 71331b69-9302-439d-a0a0-e6759d14301c)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Chef-client pid: 4652
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:50:08+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Chef Run complete in 1.155891701 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Sending resource update report (run-id: f813cfee-9531-4238-acdc-4dc4ec590f9f)
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Chef-client pid: 4969
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 2 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:52:14+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239   * file[/var/www/html/index.html] action create[2017-11-11T06:52:15+00:00] INFO: Processing file[/var/www/html/index.html] action create (package::default line 17)
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] created file /var/www/html/index.html
54.172.193.239
54.172.193.239     - create new file /var/www/html/index.html[2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] updated file contents /var/www/html/index.html
54.172.193.239
54.172.193.239     - update content in file /var/www/html/index.html from none to b3046f
54.172.193.239     --- /var/www/html/index.html 2017-11-11 06:52:15.237958728 +0000
54.172.193.239     +++ /var/www/html/.chef-index20171111-4969-1oleakd.html      2017-11-11 06:52:15.233958737 +0000
54.172.193.239     @@ -1 +1,2 @@
54.172.193.239     + <html><body><h1> 'welcome to chef-world '</h1></body></html>
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Chef Run complete in 1.138662141 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/2 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Sending resource update report (run-id: f3f18758-0b83-48cb-9f5b-3cc94da733d3)


[root@ip-172-31-65-42 ~]# cat /var/www/html/index.html
 <html><body><h1> 'welcome to chef-world '</h1></body></html> [root@ip-172-31-65-42 ~]# cd ..
[root@ip-172-31-65-42 /]# cd -
/root
[root@ip-172-31-65-42 ~]# chef-client -o package@0.3.0
[2017-11-11T07:04:05+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:04:05+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:04:05+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:04:05+00:00] INFO: Chef-client pid: 5284
[2017-11-11T07:04:05+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:04:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:04:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:04:06+00:00] WARN: Overridden Run List: [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List is [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List expands to [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:04:06+00:00] INFO: Running start handlers
[2017-11-11T07:04:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:04:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.3.0"]
[2017-11-11T07:04:06+00:00] INFO: Loading cookbooks [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
  - package (0.3.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:04:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * cookbook_file[/var/www/html/index.html] action create[2017-11-11T07:04:07+00:00] INFO: Processing cookbook_file[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070407.508781
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from b3046f to cf4a23
    --- /var/www/html/index.html        2017-11-11 06:52:15.233958737 +0000
    +++ /var/www/html/.chef-index20171111-5284-d8fvtb.html      2017-11-11 07:04:07.501825799 +0000
    @@ -1,2 +1,3 @@
    - <html><body><h1> 'welcome to chef-world '</h1></body></html>
    +<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>
    +
[2017-11-11T07:04:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:04:07+00:00] INFO: Chef Run complete in 1.207128394 seconds
[2017-11-11T07:04:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:04:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:04:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:04:07+00:00] INFO: Sending resource update report (run-id: 241f3965-9834-434b-a0e6-335244c7639f)
[root@ip-172-31-65-42 ~]# chef-client -o package@0.4.0
[2017-11-11T07:09:04+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:09:04+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:09:04+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:09:04+00:00] INFO: Chef-client pid: 5588
[2017-11-11T07:09:04+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:09:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:09:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:09:06+00:00] WARN: Overridden Run List: [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List is [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List expands to [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:09:06+00:00] INFO: Running start handlers
[2017-11-11T07:09:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:09:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.4.0"]
[2017-11-11T07:09:06+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:09:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * template[/var/www/html/index.html] action create[2017-11-11T07:09:07+00:00] INFO: Processing template[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070907.700207
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from cf4a23 to afa033
    --- /var/www/html/index.html        2017-11-11 07:04:07.501825799 +0000
    +++ /var/www/html/.chef-index20171111-5588-9o80e0.html      2017-11-11 07:09:07.693933345 +0000
    @@ -1,3 +1,5 @@
    -<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>

    +
    +
    +<html><body><h1> 'welcome to chef-templates wolrd' </h1></body></html>
[2017-11-11T07:09:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:09:07+00:00] INFO: Chef Run complete in 1.656787461 seconds
[2017-11-11T07:09:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:09:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:09:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:09:07+00:00] INFO: Sending resource update report (run-id: 982cfb80-8ca5-4bed-ab61-df6c6d61f471)












cookbook 2:


node machine:


root@ip-172-31-74-199:~# chef-client -r package
[2017-11-11T06:31:59+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:31:59+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:31:59+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:31:59+00:00] INFO: Chef-client pid: 16026
[2017-11-11T06:31:59+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:32:00+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x000000000477e580 @version=nil, @type=:recipe, @name="package">] from CLI options
[2017-11-11T06:32:00+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T06:32:00+00:00] INFO: Run List expands to [package]
[2017-11-11T06:32:00+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:32:00+00:00] INFO: Running start handlers
[2017-11-11T06:32:00+00:00] INFO: Start handlers complete.
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:32:01+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T06:32:01+00:00] INFO: Loading cookbooks [package@0.1.0]
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
  - package (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 1 resources
Recipe: package::default
  * apt_package[apache2] action purge[2017-11-11T06:32:01+00:00] INFO: Processing apt_package[apache2] action purge (package::default line 11)
[2017-11-11T06:32:03+00:00] INFO: apt_package[apache2] purged

    - purge  package apache2
[2017-11-11T06:32:03+00:00] INFO: Chef Run complete in 2.87193777 seconds

Running handlers:
[2017-11-11T06:32:03+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:32:03+00:00] INFO: Report handlers complete
Chef Client finished, 1/1 resources updated in 04 seconds
[2017-11-11T06:32:03+00:00] INFO: Sending resource update report (run-id: 6f932de9-f6c8-4d9e-8eeb-e8baa288e7bb)
root@ip-172-31-74-199:~# service apache2 status
? apache2.service
   Loaded: not-found (Reason: No such file or directory)
   Active: inactive (dead)

Nov 11 05:57:37 ip-172-31-74-199 systemd[1]: Starting LSB: Apache2 web server...
Nov 11 05:57:37 ip-172-31-74-199 apache2[14586]:  * Starting Apache httpd web server apache2
Nov 11 05:57:38 ip-172-31-74-199 apache2[14586]:  *
Nov 11 05:57:38 ip-172-31-74-199 systemd[1]: Started LSB: Apache2 web server.
Nov 11 06:32:01 ip-172-31-74-199 systemd[1]: Stopping LSB: Apache2 web server...
Nov 11 06:32:01 ip-172-31-74-199 apache2[16427]:  * Stopping Apache httpd web server apache2
Nov 11 06:32:02 ip-172-31-74-199 apache2[16427]:  *
Nov 11 06:32:02 ip-172-31-74-199 systemd[1]: Stopped LSB: Apache2 web server.




Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:01:56+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:01:56+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:01:56+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:cookbook 2:


node machine:


root@ip-172-31-74-199:~# chef-client -r package
[2017-11-11T06:31:59+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:31:59+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:31:59+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:31:59+00:00] INFO: Chef-client pid: 16026
[2017-11-11T06:31:59+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:32:00+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x000000000477e580 @version=nil, @type=:recipe, @name="package">] from CLI options
[2017-11-11T06:32:00+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T06:32:00+00:00] INFO: Run List expands to [package]
[2017-11-11T06:32:00+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:32:00+00:00] INFO: Running start handlers
[2017-11-11T06:32:00+00:00] INFO: Start handlers complete.
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:32:01+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T06:32:01+00:00] INFO: Loading cookbooks [package@0.1.0]
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T06:32:01+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T06:32:01+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
  - package (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:32:01+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 1 resources
Recipe: package::default
  * apt_package[apache2] action purge[2017-11-11T06:32:01+00:00] INFO: Processing apt_package[apache2] action purge (package::default line 11)
[2017-11-11T06:32:03+00:00] INFO: apt_package[apache2] purged

    - purge  package apache2
[2017-11-11T06:32:03+00:00] INFO: Chef Run complete in 2.87193777 seconds

Running handlers:
[2017-11-11T06:32:03+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:32:03+00:00] INFO: Report handlers complete
Chef Client finished, 1/1 resources updated in 04 seconds
[2017-11-11T06:32:03+00:00] INFO: Sending resource update report (run-id: 6f932de9-f6c8-4d9e-8eeb-e8baa288e7bb)
root@ip-172-31-74-199:~# service apache2 status
? apache2.service
   Loaded: not-found (Reason: No such file or directory)
   Active: inactive (dead)

Nov 11 05:57:37 ip-172-31-74-199 systemd[1]: Starting LSB: Apache2 web server...
Nov 11 05:57:37 ip-172-31-74-199 apache2[14586]:  * Starting Apache httpd web server apache2
Nov 11 05:57:38 ip-172-31-74-199 apache2[14586]:  *
Nov 11 05:57:38 ip-172-31-74-199 systemd[1]: Started LSB: Apache2 web server.
Nov 11 06:32:01 ip-172-31-74-199 systemd[1]: Stopping LSB: Apache2 web server...
Nov 11 06:32:01 ip-172-31-74-199 apache2[16427]:  * Stopping Apache httpd web server apache2
Nov 11 06:32:02 ip-172-31-74-199 apache2[16427]:  *
Nov 11 06:32:02 ip-172-31-74-199 systemd[1]: Stopped LSB: Apache2 web server.




Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:01:56+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:01:56+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:01:56+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17217;start=09:01:54;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:01:56+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:01:56+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:01:56+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:01:56+00:00] INFO: Sending resource update report (run-id: 4076b61c-f83f-4478-b3a5-82cbf2d58962)
[2017-11-11T09:01:56+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:01:56+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:01:56+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:01:56+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:03:02+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:02+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:02+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:02+00:00] INFO: Chef-client pid: 17535
[2017-11-11T09:03:02+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:04+00:00] WARN: Run List override has been provided.
[2017-11-11T09:03:04+00:00] WARN: Original Run List: [recipe[package]]
[2017-11-11T09:03:04+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:04+00:00] INFO: Running start handlers
[2017-11-11T09:03:04+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:04+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:03:04+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:03:04+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:03:04+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17530;start=09:03:02;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:03:04+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:03:04+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:04+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:04+00:00] INFO: Sending resource update report (run-id: 03600e09-9eb8-4298-bb5f-90afe7adf9fe)
[2017-11-11T09:03:04+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:04+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:04+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:03:04+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r think::mul
[2017-11-11T09:03:47+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:47+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:47+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:47+00:00] INFO: Chef-client pid: 17853
[2017-11-11T09:03:47+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:48+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003bd3528 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:03:48+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:03:48+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:03:48+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:48+00:00] INFO: Running start handlers
[2017-11-11T09:03:48+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:48+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:48+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:03:49+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its is no longer in the cookbook manifest.
Synchronizing Cookbooks:
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=17848;start=09:03:47;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:03:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:49+00:00] INFO: Sending resource update report (run-id: e914560b-9be6-4d80-8234-51418eaf54ea)
[2017-11-11T09:03:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:03:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client
[2017-11-11T09:04:06+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:04:06+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:04:06+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:04:06+00:00] INFO: Chef-client pid: 18157
[2017-11-11T09:04:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:04:07+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T09:04:07+00:00] INFO: Run List expands to [package]
[2017-11-11T09:04:07+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:04:07+00:00] INFO: Running start handlers
[2017-11-11T09:04:07+00:00] INFO: Start handlers complete.
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:04:07+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T09:04:07+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * apt_package[httpd] action install[2017-11-11T09:04:07+00:00] INFO: Processing apt_package[httpd] action install (package::default line 11)


    ================================================================================
    Error executing action `install` on resource 'apt_package[httpd]'
    ================================================================================

    Chef::Exceptions::Package
    -------------------------
    httpd is a virtual package provided by multiple packages, you must explicitly select one

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/package/recipes/default.rb

     11: package "httpd"do
     12:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/package/recipes/default.rb:11:in `from_file'

    apt_package("httpd") do
      package_name "httpd"
      action [:install]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      declared_type :package
      cookbook_name "package"
      recipe_name "default"
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=18152;start=09:04:06;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:04:08+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:04:08+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:04:08+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:04:08+00:00] INFO: Sending resource update report (run-id: 736ce9e2-15c3-4ff2-b2ca-5b1ce07dd878)
[2017-11-11T09:04:08+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:04:08+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:04:08+00:00] ERROR: apt_package[httpd] (package::default line 11) had an error: Chef::Exceptions::Package: httpd is a virtual package provided by multiple packages, you must explicitly select one
[2017-11-11T09:04:08+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:05:43+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:05:43+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:05:43+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:05:43+00:00] INFO: Chef-client pid: 18477
[2017-11-11T09:05:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:05:44+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000004f9a908 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:05:44+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:05:44+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:05:44+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:05:44+00:00] INFO: Running start handlers
[2017-11-11T09:05:44+00:00] INFO: Start handlers complete.
[2017-11-11T09:05:44+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:05:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:05:44+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/ser.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/files/default/index.html from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/README.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/CHANGELOG.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18472;start=09:05:43;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:05:45+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:05:45+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:05:45+00:00] INFO: Sending resource update report (run-id: 7e63a2ba-67d2-4ab1-ba48-ce628989db75)
[2017-11-11T09:05:45+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:05:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:05:45+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:05:45+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:06:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:06:48+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:06:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:06:48+00:00] INFO: Chef-client pid: 18786
[2017-11-11T09:06:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:06:49+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x00000000035d6d78 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:06:49+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:06:49+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:06:49+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:06:49+00:00] INFO: Running start handlers
[2017-11-11T09:06:49+00:00] INFO: Start handlers complete.
[2017-11-11T09:06:49+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:06:49+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:06:49+00:00] INFO: Loading cookbooks [think@0.220.0]
Synchronizing Cookbooks:
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18781;start=09:06:48;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:06:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:06:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:06:49+00:00] INFO: Sending resource update report (run-id: f8b86f80-e4ec-4df2-9c31-728a2b8a3950)
[2017-11-11T09:06:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:06:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:06:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:06:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:07:08+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:07:08+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:07:08+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:07:08+00:00] INFO: Chef-client pid: 19089
[2017-11-11T09:07:08+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:07:09+00:00] WARN: Run List override has been provided.
[2017-11-11T09:07:09+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T09:07:09+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:07:09+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:07:09+00:00] INFO: Running start handlers
[2017-11-11T09:07:09+00:00] INFO: Start handlers complete.
[2017-11-11T09:07:09+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:07:09+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:07:10+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:07:10+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/templates/default/index.html.erb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/files/default/sample.war in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/mul.rb in the cache.
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:07:10+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:07:10+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:07:10+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=19084;start=09:07:08;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:07:10+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:07:10+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:07:10+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:07:10+00:00] INFO: Sending resource update report (run-id: c0b76063-6e31-40e2-a184-edf24fd6dabf)
[2017-11-11T09:07:10+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:07:10+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:07:10+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:07:10+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:18:39+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:18:39+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:18:39+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:18:39+00:00] INFO: Chef-client pid: 19400
[2017-11-11T09:18:39+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:18:40+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003d3a308 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:18:40+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:18:40+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:18:40+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:18:40+00:00] INFO: Running start handlers
[2017-11-11T09:18:40+00:00] INFO: Start handlers complete.
[2017-11-11T09:18:40+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:18:40+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:18:40+00:00] INFO: Loading cookbooks [multi@0.1.0]
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/templates/default/index.html.erb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/CHANGELOG.md in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/metadata.rb in the cache.
[2017-11-11T09:18:41+00:00] INFO: Storing updated cookbooks/multi/README.md in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name = apache2
 12:  service_name = apache2
 13:  document_root = "/var/www/hmtl"
 14:
 15:  if node [" paltform "] == "amazon"
 16:
 17:  package_name = httpd
 18:  service_name = httpd
 19:  document_root = "/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19395;start=09:18:39;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:18:41+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:18:41+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:18:41+00:00] INFO: Sending resource update report (run-id: 741df3b7-eb45-432e-8803-3d377633b0a4)
[2017-11-11T09:18:41+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:18:41+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:18:41+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:18:41+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:22:37+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:22:37+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:22:37+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:22:37+00:00] INFO: Chef-client pid: 19711
[2017-11-11T09:22:37+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:22:39+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003eb6d58 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:22:39+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:22:39+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:22:39+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:22:39+00:00] INFO: Running start handlers
[2017-11-11T09:22:39+00:00] INFO: Start handlers complete.
[2017-11-11T09:22:39+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:22:39+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:22:39+00:00] INFO: Loading cookbooks [multi@0.1.0]
Synchronizing Cookbooks:
[2017-11-11T09:22:39+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name=apache2
 12:  service_name=apache2
 13:  document_root="/var/www/hmtl"
 14:
 15:  if node["paltform"] == "amazon"
 16:
 17:  package_name=httpd
 18:  service_name=httpd
 19:  document_root="/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19706;start=09:22:37;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:22:39+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:22:39+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:22:39+00:00] INFO: Sending resource update report (run-id: 16f4ce9e-d444-46d0-9bfc-8bffca3ec73c)
[2017-11-11T09:22:39+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:22:39+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:22:39+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:22:39+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)



chef-bootstrap a node:


[root@ip-172-31-64-176 chef-repo]# knife cookbook create think
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook think in /root/chef-repo/cookbooks
** Creating README for cookbook: think
** Creating CHANGELOG for cookbook: think
** Creating metadata for cookbook: think
[root@ip-172-31-64-176 chef-repo]# git init
Initialized empty Git repository in /root/chef-repo/.git/
[root@ip-172-31-64-176 chef-repo]# cd cookbooks/
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd think/
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook delete think
Do you really want to delete think version 0.1.0? (Y/N) y
Deleted cookbook[think version 0.1.0]
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cp /home/ec2-user/shell.pem /root/
[root@ip-172-31-64-176 recipes]# knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
ERROR: Must pass an FQDN or ip to bootstrap
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216--sudo
ERROR: Network Error: getaddrinfo: Name or service not known
Check your knife configuration and network settings
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Installing Chef Omnibus (-v 12)
54.243.15.216 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.243.15.216   to file /tmp/install.sh.1531/install.sh
54.243.15.216 trying wget...
54.243.15.216 ubuntu 16.04 x86_64
54.243.15.216 Getting information for chef stable 12 for ubuntu...
54.243.15.216 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=ubuntu&pv=16.04&m=x86_64
54.243.15.216   to file /tmp/install.sh.1535/metadata.txt
54.243.15.216 trying wget...
54.243.15.216 sha1      b21baa643ef453f488351cd5623756e19ebec749
54.243.15.216 sha256    f2320ba894d92e4fd8fbae81546a70f124754cd40be388ba44de8180fbc2ea4d
54.243.15.216 url       https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216 version   12.21.26
54.243.15.216 downloaded metadata file looks valid...
54.243.15.216 downloading https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216   to file /tmp/install.sh.1535/chef_12.21.26-1_amd64.deb
54.243.15.216 trying wget...
54.243.15.216 Comparing checksum with sha256sum...
54.243.15.216 Installing chef 12
54.243.15.216 installing with dpkg...
54.243.15.216 Selecting previously unselected package chef.
(Reading database ... 51071 files and directories currently installed.)
54.243.15.216 Preparing to unpack .../chef_12.21.26-1_amd64.deb ...
54.243.15.216 Unpacking chef (12.21.26-1) ...
54.243.15.216 Setting up chef (12.21.26-1) ...
54.243.15.216 Thank you for installing Chef!
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Chef-client pid: 1617
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Setting the run_list to [] from CLI options
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List is []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List expands to []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Loading cookbooks []
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:26:44+00:00] WARN: Node positive has an empty run list.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 0 resources
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Chef Run complete in 0.376994307 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/0 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Sending resource update report (run-id: 27d1ea9d-6d56-4b69-b56b-a9fbd53639a2)
[root@ip-172-31-64-176 recipes]# knife node run list add positive think
positive:
  run_list: recipe[think]
[root@ip-172-31-64-176 recipes]# history
    1  ping in.com
    2  cat /etc/issue
    3  git --version
    4  wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
    5  rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
    6  git pull https://github.com/Thinkpositvie/chefrepo.git
    7  git init
    8  git pull https://github.com/Thinkpositvie/chefrepo.git
    9  ls
   10  rm chefdk-1.5.0-1.el6.x86_64.rpm
   11  cd chef-repo/
   12  knife client list
   13  cd ..
   14  rm -rf chef-repo/
   15  unzip chef-starter.zip
   16  cd chef-repo/
   17  knife client list
   18  knife nodelist
   19  knife node list
   20  knife cookbook list
   21  knife cookbook create think
   22  git init
   23  cd cookbooks/
   24  ls
   25  cd think/
   26  ls
   27  cd recipes/
   28  ls
   29  vi default.rb
   30  knife cookbook test think
   31  knife cookbook upload  think
   32  knife cookbook delete think
   33  knife cookbook upload  think
   34  cp /home/ec2-user/shell.pem /root/
   35  knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
   36  knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
   37  knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
   38  knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
   39*
   40  history
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Chef-client pid: 2283
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 1 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:31:50+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Chef Run complete in 0.35214713 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/1 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Sending resource update report (run-id: 98d0ef36-6c0a-437c-9512-d01f270454f4)
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Chef-client pid: 2645
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 2 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:32:30+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216   * linux_user[nag] action create[2017-11-11T05:32:30+00:00] INFO: Processing linux_user[nag] action create (think::default line 19)
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: linux_user[nag] created
54.243.15.216
54.243.15.216     - create user nag
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Chef Run complete in 0.472534973 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 1/2 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Sending resource update report (run-id: 28dabc85-fa7c-4b96-912a-d207c3096afe)
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd -
/root/chef-repo/cookbooks/think/recipes
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think@0.2.0
ERROR: Could not find cookbook think@0.2.0 in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.3.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# vi  metadata.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# chef-client -o think@0.4.0
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] WARN: Did not find config file: /etc/chef/client.rb, using command line options.
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.2
[2017-11-11T06:09:48+00:00] INFO: *** Chef 12.21.2 ***
[2017-11-11T06:09:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:09:48+00:00] INFO: Chef-client pid: 3372
[2017-11-11T06:09:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
Creating a new client identity for ip-172-31-64-176.ec2.internal using the validator key.
[2017-11-11T06:09:50+00:00] INFO: Client key /etc/chef/client.pem is not present - registering

================================================================================
Chef encountered an error attempting to create the client "ip-172-31-64-176.ec2.internal"
================================================================================

System Info:
------------
chef_version=12.21.2
ruby=ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]
program_name=chef-client worker: ppid=3367;start=06:09:48;
executable=/opt/chefdk/bin/chef-client


Running handlers:
[2017-11-11T06:09:50+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T06:09:50+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T06:09:50+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T06:09:50+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T06:09:50+00:00] ERROR: I can't write your private key to /etc/chef/client.pem - check permissions?
[2017-11-11T06:09:50+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 think]# clear
[root@ip-172-31-64-176 think]# lss
-bash: lss: command not found
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# wget https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
--2017-11-11 06:15:12--  https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
Resolving tomcat.apache.org (tomcat.apache.org)... 140.211.11.105, 195.154.151.36, 2001:bc8:2142:300::
Connecting to tomcat.apache.org (tomcat.apache.org)|140.211.11.105|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4606 (4.5K)
Saving to: sample.war

sample.war                                100%[=====================================================================================>]   4.50K  --.-KB/s    in 0s

2017-11-11 06:15:13 (277 MB/s) - sample.war saved [4606/4606]

[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  sample.war  templates
[root@ip-172-31-64-176 think]# mv sample.war files/default/
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd -
/root/chef-repo/cookbooks/think
[root@ip-172-31-64-176 think]# cd files/
[root@ip-172-31-64-176 files]# ls
default
[root@ip-172-31-64-176 files]# cd default/
[root@ip-172-31-64-176 default]# ls
sample.war
[root@ip-172-31-64-176 default]# cd ..
[root@ip-172-31-64-176 files]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# cd..
-bash: cd..: command not found
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# knife cookbook create package
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook package in /root/chef-repo/cookbooks
** Creating README for cookbook: package
** Creating CHANGELOG for cookbook: package
** Creating metadata for cookbook: package
[root@ip-172-31-64-176 cookbooks]# cd  package
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 package]# vi metadata.rb
[root@ip-172-31-64-176 package]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239
ERROR: You must pass a node name with -N when bootstrapping with user credentials
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Installing Chef Omnibus (-v 12)
54.172.193.239 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.172.193.239   to file /tmp/install.sh.2760/install.sh
54.172.193.239 trying wget...
54.172.193.239 el 6 x86_64
54.172.193.239 Getting information for chef stable 12 for el...
54.172.193.239 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=el&pv=6&m=x86_64
54.172.193.239   to file /tmp/install.sh.2765/metadata.txt
54.172.193.239 trying wget...
54.172.193.239 sha1     e1f7d3c6ee99aedeac4ad8a950877af7edc8164c
54.172.193.239 sha256   6a47f8f88d3f4568defa13076a21a005bd48ee3e7100d3c66d8f0cc41554306e
54.172.193.239 url      https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 version  12.21.26
54.172.193.239 downloaded metadata file looks valid...
54.172.193.239 downloading https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239   to file /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 trying wget...
54.172.193.239 Comparing checksum with sha256sum...
54.172.193.239 Installing chef 12
54.172.193.239 installing with rpm...
54.172.193.239 warning: /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
54.172.193.239 Preparing...                          ################################# [100%]
54.172.193.239 Updating / installing...
54.172.193.239    1:chef-12.21.26-1.el6              ################################# [100%]
54.172.193.239 Thank you for installing Chef!
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Chef-client pid: 2837
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:37:38+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239 [2017-11-11T06:37:39+00:00] INFO: yum_package[httpd] installing httpd-2.2.34-1.16.amzn1 from amzn-updates repository
54.172.193.239 [2017-11-11T06:37:42+00:00] INFO: yum_package[httpd] installed httpd at 2.2.34-1.16.amzn1
54.172.193.239
54.172.193.239     - install version 2.2.34-1.16.amzn1 of package httpd
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Chef Run complete in 4.65663913 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/1 resources updated in 06 seconds
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Sending resource update report (run-id: c510a08d-e543-4dd9-99bf-989681c02f82)
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi ser.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
==============================================================================================



node 2:



root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
[root@ip-172-31-64-176 recipes]# cp ser.rb default.rb
cp: overwrite default.rb? n
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Chef-client pid: 4334
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:49:30+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Chef Run complete in 1.424903929 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Sending resource update report (run-id: 71331b69-9302-439d-a0a0-e6759d14301c)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Chef-client pid: 4652
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:50:08+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Chef Run complete in 1.155891701 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Sending resource update report (run-id: f813cfee-9531-4238-acdc-4dc4ec590f9f)
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Chef-client pid: 4969
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 2 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:52:14+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239   * file[/var/www/html/index.html] action create[2017-11-11T06:52:15+00:00] INFO: Processing file[/var/www/html/index.html] action create (package::default line 17)
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] created file /var/www/html/index.html
54.172.193.239
54.172.193.239     - create new file /var/www/html/index.html[2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] updated file contents /var/www/html/index.html
54.172.193.239
54.172.193.239     - update content in file /var/www/html/index.html from none to b3046f
54.172.193.239     --- /var/www/html/index.html 2017-11-11 06:52:15.237958728 +0000
54.172.193.239     +++ /var/www/html/.chef-index20171111-4969-1oleakd.html      2017-11-11 06:52:15.233958737 +0000
54.172.193.239     @@ -1 +1,2 @@
54.172.193.239     + <html><body><h1> 'welcome to chef-world '</h1></body></html>
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Chef Run complete in 1.138662141 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/2 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Sending resource update report (run-id: f3f18758-0b83-48cb-9f5b-3cc94da733d3)


[root@ip-172-31-65-42 ~]# cat /var/www/html/index.html
 <html><body><h1> 'welcome to chef-world '</h1></body></html> [root@ip-172-31-65-42 ~]# cd ..
[root@ip-172-31-65-42 /]# cd -
/root
[root@ip-172-31-65-42 ~]# chef-client -o package@0.3.0
[2017-11-11T07:04:05+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:04:05+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:04:05+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:04:05+00:00] INFO: Chef-client pid: 5284
[2017-11-11T07:04:05+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:04:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:04:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:04:06+00:00] WARN: Overridden Run List: [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List is [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List expands to [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:04:06+00:00] INFO: Running start handlers
[2017-11-11T07:04:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:04:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.3.0"]
[2017-11-11T07:04:06+00:00] INFO: Loading cookbooks [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
  - package (0.3.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:04:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * cookbook_file[/var/www/html/index.html] action create[2017-11-11T07:04:07+00:00] INFO: Processing cookbook_file[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070407.508781
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from b3046f to cf4a23
    --- /var/www/html/index.html        2017-11-11 06:52:15.233958737 +0000
    +++ /var/www/html/.chef-index20171111-5284-d8fvtb.html      2017-11-11 07:04:07.501825799 +0000
    @@ -1,2 +1,3 @@
    - <html><body><h1> 'welcome to chef-world '</h1></body></html>
    +<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>
    +
[2017-11-11T07:04:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:04:07+00:00] INFO: Chef Run complete in 1.207128394 seconds
[2017-11-11T07:04:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:04:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:04:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:04:07+00:00] INFO: Sending resource update report (run-id: 241f3965-9834-434b-a0e6-335244c7639f)
[root@ip-172-31-65-42 ~]# chef-client -o package@0.4.0
[2017-11-11T07:09:04+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:09:04+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:09:04+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:09:04+00:00] INFO: Chef-client pid: 5588
[2017-11-11T07:09:04+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:09:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:09:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:09:06+00:00] WARN: Overridden Run List: [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List is [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List expands to [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:09:06+00:00] INFO: Running start handlers
[2017-11-11T07:09:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:09:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.4.0"]
[2017-11-11T07:09:06+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:09:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * template[/var/www/html/index.html] action create[2017-11-11T07:09:07+00:00] INFO: Processing template[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070907.700207
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from cf4a23 to afa033
    --- /var/www/html/index.html        2017-11-11 07:04:07.501825799 +0000
    +++ /var/www/html/.chef-index20171111-5588-9o80e0.html      2017-11-11 07:09:07.693933345 +0000
    @@ -1,3 +1,5 @@
    -<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>

    +
    +
    +<html><body><h1> 'welcome to chef-templates wolrd' </h1></body></html>
[2017-11-11T07:09:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:09:07+00:00] INFO: Chef Run complete in 1.656787461 seconds
[2017-11-11T07:09:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:09:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:09:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:09:07+00:00] INFO: Sending resource update report (run-id: 982cfb80-8ca5-4bed-ab61-df6c6d61f471)




Using username "ec2-user".
Authenticating with public key "imported-openssh-key"
Last login: Sat Nov 11 05:07:09 2017 from 27.34.252.214

       __|  __|_  )
       _|  (     /   Amazon Linux AMI
      ___|\___|___|

https://aws.amazon.com/amazon-linux-ami/2017.09-release-notes/
[ec2-user@ip-172-31-64-176 ~]$ sudo -y
sudo: invalid option -- 'y'
usage: sudo [-D level] -h | -K | -k | -V
usage: sudo -v [-AknS] [-D level] [-g groupname|#gid] [-p prompt] [-u user
            name|#uid]
usage: sudo -l[l] [-AknS] [-D level] [-g groupname|#gid] [-p prompt] [-U user
            name] [-u user name|#uid] [-g groupname|#gid] [command]
usage: sudo [-AbEHknPS] [-r role] [-t type] [-C fd] [-D level] [-g
            groupname|#gid] [-p prompt] [-u user name|#uid] [-g groupname|#gid]
            [VAR=value] [-i|-s] [<command>]
usage: sudo -e [-AknS] [-r role] [-t type] [-C fd] [-D level] [-g
            groupname|#gid] [-p prompt] [-u user name|#uid] file ...
[ec2-user@ip-172-31-64-176 ~]$ sudo -i
[root@ip-172-31-64-176 ~]# ping in.com
PING in.com (124.153.64.24) 56(84) bytes of data.
64 bytes from 124.153.64.24: icmp_seq=1 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=2 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=3 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=4 ttl=232 time=260 ms
64 bytes from 124.153.64.24: icmp_seq=5 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=6 ttl=232 time=262 ms
64 bytes from 124.153.64.24: icmp_seq=7 ttl=232 time=259 ms
64 bytes from 124.153.64.24: icmp_seq=8 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=9 ttl=232 time=259 ms
64 bytes from 124.153.64.24: icmp_seq=10 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=11 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=12 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=13 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=14 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=15 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=16 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=17 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=18 ttl=232 time=258 ms
64 bytes from 124.153.64.24: icmp_seq=19 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=20 ttl=232 time=257 ms
64 bytes from 124.153.64.24: icmp_seq=21 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=22 ttl=232 time=260 ms
64 bytes from 124.153.64.24: icmp_seq=23 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=24 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=25 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=26 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=27 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=28 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=29 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=30 ttl=232 time=259 ms
64 bytes from 124.153.64.24: icmp_seq=31 ttl=232 time=256 ms
64 bytes from 124.153.64.24: icmp_seq=32 ttl=232 time=258 ms
64 bytes from 124.153.64.24: icmp_seq=33 ttl=232 time=272 ms
64 bytes from 124.153.64.24: icmp_seq=34 ttl=232 time=255 ms
64 bytes from 124.153.64.24: icmp_seq=35 ttl=232 time=265 ms
64 bytes from 124.153.64.24: icmp_seq=36 ttl=232 time=256 ms
^C
--- in.com ping statistics ---
37 packets transmitted, 36 received, 2% packet loss, time 36049ms
rtt min/avg/max/mdev = 255.970/257.943/272.177/3.237 ms
[root@ip-172-31-64-176 ~]# cat /etc/issue
Amazon Linux AMI release 2017.09
Kernel \r on an \m

[root@ip-172-31-64-176 ~]# git --version
git version 2.13.6
[root@ip-172-31-64-176 ~]# wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
--2017-11-11 05:14:58--  https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
Resolving packages.chef.io (packages.chef.io)... 151.101.34.110
Connecting to packages.chef.io (packages.chef.io)|151.101.34.110|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 108045477 (103M) [application/x-rpm]
Saving to: chefdk-1.5.0-1.el6.x86_64.rpm

chefdk-1.5.0-1.el6.x86_64.rpm             100%[=====================================================================================>] 103.04M  26.6MB/s    in 3.9s

2017-11-11 05:15:02 (26.5 MB/s) - chefdk-1.5.0-1.el6.x86_64.rpm saved [108045477/108045477]

[root@ip-172-31-64-176 ~]# rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
warning: chefdk-1.5.0-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
Preparing...                          ################################# [100%]
Updating / installing...
   1:chefdk-1.5.0-1.el6               ################################# [100%]
Thank you for installing Chef Development Kit!
[root@ip-172-31-64-176 ~]# git pull https://github.com/Thinkpositvie/chefrepo.git
fatal: Not a git repository (or any of the parent directories): .git
[root@ip-172-31-64-176 ~]# git init
Initialized empty Git repository in /root/.git/
[root@ip-172-31-64-176 ~]# git pull https://github.com/Thinkpositvie/chefrepo.git
remote: Counting objects: 35, done.
remote: Compressing objects: 100% (21/21), done.
remote: Total 35 (delta 2), reused 32 (delta 2), pack-reused 0
Unpacking objects: 100% (35/35), done.
From https://github.com/Thinkpositvie/chefrepo
 * branch            HEAD       -> FETCH_HEAD
[root@ip-172-31-64-176 ~]# ls
chefdk-1.5.0-1.el6.x86_64.rpm  chef-repo  chef-starter.zip  nag  README.md
[root@ip-172-31-64-176 ~]# rm chefdk-1.5.0-1.el6.x86_64.rpm
rm: remove regular file chefdk-1.5.0-1.el6.x86_64.rpm? ^C
[root@ip-172-31-64-176 ~]# cd chef-repo/
[root@ip-172-31-64-176 chef-repo]# knife client list
WARN: Failed to read the private key /root/chef-repo/.chef/nag9991.pem: #<Errno::ENOENT: No such file or directory @ rb_sysopen - /root/chef-repo/.chef/nag9991.pem>
ERROR: Your private key could not be loaded from /root/chef-repo/.chef/nag9991.pem
Check your configuration file and ensure that your private key is readable
[root@ip-172-31-64-176 chef-repo]# cd ..
[root@ip-172-31-64-176 ~]# rm -rf chef-repo/
[root@ip-172-31-64-176 ~]# unzip chef-starter.zip
Archive:  chef-starter.zip
   creating: chef-repo/cookbooks/
  inflating: chef-repo/cookbooks/chefignore
   creating: chef-repo/cookbooks/starter/
   creating: chef-repo/cookbooks/starter/files/
   creating: chef-repo/cookbooks/starter/files/default/
  inflating: chef-repo/cookbooks/starter/files/default/sample.txt
  inflating: chef-repo/cookbooks/starter/metadata.rb
   creating: chef-repo/cookbooks/starter/attributes/
  inflating: chef-repo/cookbooks/starter/attributes/default.rb
   creating: chef-repo/cookbooks/starter/templates/
   creating: chef-repo/cookbooks/starter/templates/default/
  inflating: chef-repo/cookbooks/starter/templates/default/sample.erb
   creating: chef-repo/cookbooks/starter/recipes/
  inflating: chef-repo/cookbooks/starter/recipes/default.rb
  inflating: chef-repo/README.md
  inflating: chef-repo/.gitignore
   creating: chef-repo/.chef/
   creating: chef-repo/roles/
  inflating: chef-repo/.chef/knife.rb
  inflating: chef-repo/roles/starter.rb
  inflating: chef-repo/.chef/nag9991.pem
[root@ip-172-31-64-176 ~]# cd chef-repo/
[root@ip-172-31-64-176 chef-repo]# knife client list
client
node
node1
node2
node3
node4
test5179-validator
[root@ip-172-31-64-176 chef-repo]# knife nodelist
FATAL: Cannot find subcommand for: 'nodelist'
Available subcommands: (for details, knife SUB-COMMAND --help)

** OPSCODE PRIVATE CHEF ORGANIZATION MANAGEMENT COMMANDS **
knife opc org create ORG_SHORT_NAME ORG_FULL_NAME (options)
knife opc org delete ORG_NAME
knife opc org edit ORG
knife opc org list
knife opc org show ORGNAME
knife opc org user add ORG_NAME USER_NAME
knife opc org user remove ORG_NAME USER_NAME
knife opc user create USERNAME FIRST_NAME [MIDDLE_NAME] LAST_NAME EMAIL PASSWORD
knife opc user delete USERNAME [-d]
knife opc user edit USERNAME
knife opc user list
knife opc user password USERNAME [PASSWORD | --enable-external-auth]
knife opc user show USERNAME

** BOOTSTRAP COMMANDS **
knife bootstrap [SSH_USER@]FQDN (options)
knife bootstrap windows ssh FQDN (options)
knife bootstrap windows winrm FQDN (options)

** CLIENT COMMANDS **
knife client bulk delete REGEX (options)
knife client create CLIENTNAME (options)
knife client delete [CLIENT[,CLIENT]] (options)
knife client edit CLIENT (options)
Usage: /usr/bin/knife (options)
knife client key delete CLIENT KEYNAME (options)
knife client key edit CLIENT KEYNAME (options)
knife client key list CLIENT (options)
knife client key show CLIENT KEYNAME (options)
knife client list (options)
knife client reregister CLIENT (options)
knife client show CLIENT (options)

** CONFIGURE COMMANDS **
knife configure (options)
knife configure client DIRECTORY

** COOKBOOK COMMANDS **
knife cookbook bulk delete REGEX (options)
knife cookbook create COOKBOOK (options)
knife cookbook delete COOKBOOK VERSION (options)
knife cookbook download COOKBOOK [VERSION] (options)
knife cookbook list (options)
knife cookbook metadata COOKBOOK (options)
knife cookbook metadata from FILE (options)
knife cookbook show COOKBOOK [VERSION] [PART] [FILENAME] (options)
knife cookbook test [COOKBOOKS...] (options)
knife cookbook upload [COOKBOOKS...] (options)

** COOKBOOK SITE COMMANDS **
knife cookbook site download COOKBOOK [VERSION] (options)
knife cookbook site install COOKBOOK [VERSION] (options)
knife cookbook site list (options)
knife cookbook site search QUERY (options)
knife cookbook site share COOKBOOK [CATEGORY] (options)
knife cookbook site show COOKBOOK [VERSION] (options)
knife cookbook site unshare COOKBOOK

** DATA BAG COMMANDS **
knife data bag create BAG [ITEM] (options)
knife data bag delete BAG [ITEM] (options)
knife data bag edit BAG ITEM (options)
knife data bag from file BAG FILE|FOLDER [FILE|FOLDER..] (options)
knife data bag list (options)
knife data bag show BAG [ITEM] (options)

** DECRYPT COMMANDS **
knife decrypt VAULT ITEM [VALUES] (options)

** EC2 COMMANDS **
knife ec2 amis ubuntu DISTRO [TYPE] (options)

** ENCRYPT COMMANDS **
knife encrypt create VAULT ITEM VALUES (options)
knife encrypt delete VAULT ITEM (options)
knife encrypt remove VAULT ITEM VALUES (options)
knife encrypt rotate keys VAULT ITEM (options)
knife encrypt update VAULT ITEM VALUES (options)

** ENVIRONMENT COMMANDS **
knife environment compare [ENVIRONMENT..] (options)
knife environment create ENVIRONMENT (options)
knife environment delete ENVIRONMENT (options)
knife environment edit ENVIRONMENT (options)
knife environment from file FILE [FILE..] (options)
knife environment list (options)
knife environment show ENVIRONMENT (options)

** EXEC COMMANDS **
knife exec [SCRIPT] (options)

** HELP COMMANDS **
knife help [list|TOPIC]

** INDEX COMMANDS **
knife index rebuild (options)

** JOB COMMANDS **
knife job list
knife job output <job id> <node> [<node> ...]
knife job start <command> [<node> <node> ...]
knife job status <job id>

** KNIFE COMMANDS **
Usage: /usr/bin/knife (options)

** NODE COMMANDS **
knife node bulk delete REGEX (options)
knife node create NODE (options)
knife node delete [NODE[,NODE]] (options)
knife node edit NODE (options)
knife node environment set NODE ENVIRONMENT
knife node from file FILE (options)
knife node list (options)
knife node run_list add [NODE] [ENTRY[,ENTRY]] (options)
knife node run_list remove [NODE] [ENTRY[,ENTRY]] (options)
knife node run_list set NODE ENTRIES (options)
knife node show NODE (options)
knife node status [<node> <node> ...]

** NULL COMMANDS **
knife null

** OSC COMMANDS **
knife osc_user create USER (options)
knife osc_user delete USER (options)
knife osc_user edit USER (options)
knife osc_user list (options)
knife osc_user reregister USER (options)
knife osc_user show USER (options)

** PATH-BASED COMMANDS **
knife delete [PATTERN1 ... PATTERNn]
knife deps PATTERN1 [PATTERNn]
knife diff PATTERNS
knife download PATTERNS
knife edit [PATTERN1 ... PATTERNn]
knife list [-dfR1p] [PATTERN1 ... PATTERNn]
knife show [PATTERN1 ... PATTERNn]
knife upload PATTERNS
knife xargs [COMMAND]

** RAW COMMANDS **
knife raw REQUEST_PATH

** RECIPE COMMANDS **
knife recipe list [PATTERN]

** REHASH COMMANDS **
knife rehash

** ROLE COMMANDS **
knife role bulk delete REGEX (options)
knife role create ROLE (options)
knife role delete ROLE (options)
knife role edit ROLE (options)
knife role env_run_list add [ROLE] [ENVIRONMENT] [ENTRY[,ENTRY]] (options)
knife role env_run_list clear [ROLE] [ENVIRONMENT]
knife role env_run_list remove [ROLE] [ENVIRONMENT] [ENTRIES]
knife role env_run_list replace [ROLE] [ENVIRONMENT] [OLD_ENTRY] [NEW_ENTRY]
knife role env_run_list set [ROLE] [ENVIRONMENT] [ENTRIES]
knife role from file FILE [FILE..] (options)

knife spork info
knife spork node create NODE (options)
knife spork node delete NODE (options)
knife spork node edit NODE (options)
knife spork node from file FILE (options)
knife spork node run_list add [NODE] [ENTRY[,ENTRY]] (options)
knife spork node run_list add [NODE] [ENTRY[,ENTRY]] (options)
knife spork node run_list set NODE ENTRIES (options)
knife spork omni COOKBOOK (options)
knife spork promote ENVIRONMENT COOKBOOK (options)
knife spork role create ROLE (options)
knife spork role delete ROLENAME (options)
knife spork role edit ROLENAME (options)
knife spork role from file FILENAME (options)
knife spork upload [COOKBOOKS...] (options)

** SSH COMMANDS **
knife ssh QUERY COMMAND (options)

** SSL COMMANDS **
knife ssl check [URL] (options)
knife ssl fetch [URL] (options)

** STATUS COMMANDS **
knife status QUERY (options)

** SUPERMARKET COMMANDS **
knife supermarket download COOKBOOK [VERSION] (options)
knife supermarket install COOKBOOK [VERSION] (options)
knife supermarket list (options)
knife supermarket search QUERY (options)
knife supermarket share COOKBOOK [CATEGORY] (options)
knife supermarket show COOKBOOK [VERSION] (options)
knife supermarket unshare COOKBOOK (options)

** TAG COMMANDS **
knife tag create NODE TAG ...
knife tag delete NODE TAG ...
knife tag list NODE

** USER COMMANDS **
knife user create USERNAME DISPLAY_NAME FIRST_NAME LAST_NAME EMAIL PASSWORD (options)
knife user delete USER (options)
knife user edit USER (options)
knife user key create USER (options)
knife user key delete USER KEYNAME (options)
knife user key edit USER KEYNAME (options)
knife user key list USER (options)
knife user key show USER KEYNAME (options)
knife user list (options)
knife user reregister USER (options)
knife user show USER (options)

** VAULT COMMANDS **
knife vault create VAULT ITEM VALUES (options)
knife vault decrypt VAULT ITEM [VALUES] (options)
knife vault delete VAULT ITEM (options)
knife vault download VAULT ITEM PATH (options)
knife vault edit VAULT ITEM (options)
knife vault isvault VAULT ITEM (options)
knife vault itemtype VAULT ITEM (options)
knife vault list (options)
knife vault refresh VAULT ITEM
knife vault remove VAULT ITEM VALUES (options)
knife vault rotate all keys
knife vault rotate keys VAULT ITEM (options)
knife vault show VAULT [ITEM] [VALUES] (options)
knife vault update VAULT ITEM VALUES (options)

** WINDOWS COMMANDS **
knife windows cert generate FILE_PATH (options)
knife windows cert install CERT [CERT] (options)
knife bootstrap windows winrm FQDN (options)
knife bootstrap windows ssh FQDN (options)
knife winrm QUERY COMMAND (options)
knife wsman test QUERY (options)
knife windows listener create (options)

** WINRM COMMANDS **
knife winrm QUERY COMMAND (options)

** WSMAN COMMANDS **
knife wsman test QUERY (options)

[root@ip-172-31-64-176 chef-repo]# knife nodelist
FATAL: Cannot find subcommand for: 'nodelist'
Available subcommands: (for details, knife SUB-COMMAND --help)

** OPSCODE PRIVATE CHEF ORGANIZATION MANAGEMENT COMMANDS **
knife opc org create ORG_SHORT_NAME ORG_FULL_NAME (options)
knife opc org delete ORG_NAME
knife opc org edit ORG
knife opc org list
knife opc org show ORGNAME
knife opc org user add ORG_NAME USER_NAME
knife opc org user remove ORG_NAME USER_NAME
knife opc user create USERNAME FIRST_NAME [MIDDLE_NAME] LAST_NAME EMAIL PASSWORD
knife opc user delete USERNAME [-d]
knife opc user edit USERNAME
knife opc user list
knife opc user password USERNAME [PASSWORD | --enable-external-auth]
knife opc user show USERNAME

** BOOTSTRAP COMMANDS **
knife bootstrap [SSH_USER@]FQDN (options)
knife bootstrap windows ssh FQDN (options)
knife bootstrap windows winrm FQDN (options)

** CLIENT COMMANDS **
knife client bulk delete REGEX (options)
knife client create CLIENTNAME (options)
knife client delete [CLIENT[,CLIENT]] (options)
knife client edit CLIENT (options)
Usage: /usr/bin/knife (options)
knife client key delete CLIENT KEYNAME (options)
knife client key edit CLIENT KEYNAME (options)
knife client key list CLIENT (options)
knife client key show CLIENT KEYNAME (options)
knife client list (options)
knife client reregister CLIENT (options)
knife client show CLIENT (options)

** CONFIGURE COMMANDS **
knife configure (options)
knife configure client DIRECTORY

** COOKBOOK COMMANDS **
knife cookbook bulk delete REGEX (options)
knife cookbook create COOKBOOK (options)
knife cookbook delete COOKBOOK VERSION (options)
knife cookbook download COOKBOOK [VERSION] (options)
knife cookbook list (options)
knife cookbook metadata COOKBOOK (options)
knife cookbook metadata from FILE (options)
knife cookbook show COOKBOOK [VERSION] [PART] [FILENAME] (options)
knife cookbook test [COOKBOOKS...] (options)
knife cookbook upload [COOKBOOKS...] (options)

** COOKBOOK SITE COMMANDS **
knife cookbook site download COOKBOOK [VERSION] (options)
knife cookbook site install COOKBOOK [VERSION] (options)
knife cookbook site list (options)
knife cookbook site search QUERY (options)
knife cookbook site share COOKBOOK [CATEGORY] (options)
knife cookbook site show COOKBOOK [VERSION] (options)
knife cookbook site unshare COOKBOOK

** DATA BAG COMMANDS **
knife data bag create BAG [ITEM] (options)
knife data bag delete BAG [ITEM] (options)
knife data bag edit BAG ITEM (options)
knife data bag from file BAG FILE|FOLDER [FILE|FOLDER..] (options)
knife data bag list (options)
knife data bag show BAG [ITEM] (options)

** DECRYPT COMMANDS **
knife decrypt VAULT ITEM [VALUES] (options)

** EC2 COMMANDS **
knife ec2 amis ubuntu DISTRO [TYPE] (options)

** ENCRYPT COMMANDS **
knife encrypt create VAULT ITEM VALUES (options)
knife encrypt delete VAULT ITEM (options)
knife encrypt remove VAULT ITEM VALUES (options)
knife encrypt rotate keys VAULT ITEM (options)
knife encrypt update VAULT ITEM VALUES (options)

** ENVIRONMENT COMMANDS **
knife environment compare [ENVIRONMENT..] (options)
knife environment create ENVIRONMENT (options)
knife environment delete ENVIRONMENT (options)
knife environment edit ENVIRONMENT (options)
knife environment from file FILE [FILE..] (options)
knife environment list (options)
knife environment show ENVIRONMENT (options)

** EXEC COMMANDS **
knife exec [SCRIPT] (options)

** HELP COMMANDS **
knife help [list|TOPIC]

** INDEX COMMANDS **
knife index rebuild (options)

** JOB COMMANDS **
knife job list
knife job output <job id> <node> [<node> ...]
knife job start <command> [<node> <node> ...]
knife job status <job id>

** KNIFE COMMANDS **
Usage: /usr/bin/knife (options)


[root@ip-172-31-64-176 chef-repo]# knife node list
client
[root@ip-172-31-64-176 chef-repo]# knife cookbook list
apache21       0.4.0
apacheserver   0.4.0
apt            6.1.2
attiribute     0.1.0
chefcode       0.2.0
demo           0.1.0
demo7am        0.3.0
demo7am1       0.1.0
demo9am        0.2.0
docker         2.15.29
docker1        0.1.0
envi           0.1.0
first          0.1.0
homebrew       4.2.0
httpd1         0.1.0
jai            0.2.0
java           1.50.0
job            0.3.0
nag            0.1.0
newlife        0.22.0
ohai           5.1.0
prac1          0.1.0
role           0.1.0
sample         0.2.0
sample1        0.2.0
test           0.1.0
test1          0.1.0
tomcat7        0.1.2
web            0.1.0
webdemo        0.5.0
windows        3.1.1
[root@ip-172-31-64-176 chef-repo]# knife cookbook create think
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook think in /root/chef-repo/cookbooks
** Creating README for cookbook: think
** Creating CHANGELOG for cookbook: think
** Creating metadata for cookbook: think
[root@ip-172-31-64-176 chef-repo]# git init
Initialized empty Git repository in /root/chef-repo/.git/
[root@ip-172-31-64-176 chef-repo]# cd cookbooks/
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd think/
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook delete think
Do you really want to delete think version 0.1.0? (Y/N) y
Deleted cookbook[think version 0.1.0]
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cp /home/ec2-user/shell.pem /root/
[root@ip-172-31-64-176 recipes]# knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
ERROR: Must pass an FQDN or ip to bootstrap
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216--sudo
ERROR: Network Error: getaddrinfo: Name or service not known
Check your knife configuration and network settings
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Installing Chef Omnibus (-v 12)
54.243.15.216 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.243.15.216   to file /tmp/install.sh.1531/install.sh
54.243.15.216 trying wget...
54.243.15.216 ubuntu 16.04 x86_64
54.243.15.216 Getting information for chef stable 12 for ubuntu...
54.243.15.216 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=ubuntu&pv=16.04&m=x86_64
54.243.15.216   to file /tmp/install.sh.1535/metadata.txt
54.243.15.216 trying wget...
54.243.15.216 sha1      b21baa643ef453f488351cd5623756e19ebec749
54.243.15.216 sha256    f2320ba894d92e4fd8fbae81546a70f124754cd40be388ba44de8180fbc2ea4d
54.243.15.216 url       https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216 version   12.21.26
54.243.15.216 downloaded metadata file looks valid...
54.243.15.216 downloading https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216   to file /tmp/install.sh.1535/chef_12.21.26-1_amd64.deb
54.243.15.216 trying wget...
54.243.15.216 Comparing checksum with sha256sum...
54.243.15.216 Installing chef 12
54.243.15.216 installing with dpkg...
54.243.15.216 Selecting previously unselected package chef.
(Reading database ... 51071 files and directories currently installed.)
54.243.15.216 Preparing to unpack .../chef_12.21.26-1_amd64.deb ...
54.243.15.216 Unpacking chef (12.21.26-1) ...
54.243.15.216 Setting up chef (12.21.26-1) ...
54.243.15.216 Thank you for installing Chef!
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Chef-client pid: 1617
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Setting the run_list to [] from CLI options
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List is []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List expands to []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Loading cookbooks []
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:26:44+00:00] WARN: Node positive has an empty run list.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 0 resources
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Chef Run complete in 0.376994307 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/0 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Sending resource update report (run-id: 27d1ea9d-6d56-4b69-b56b-a9fbd53639a2)
[root@ip-172-31-64-176 recipes]# knife node run list add positive think
positive:
  run_list: recipe[think]
[root@ip-172-31-64-176 recipes]# history
    1  ping in.com
    2  cat /etc/issue
    3  git --version
    4  wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
    5  rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
    6  git pull https://github.com/Thinkpositvie/chefrepo.git
    7  git init
    8  git pull https://github.com/Thinkpositvie/chefrepo.git
    9  ls
   10  rm chefdk-1.5.0-1.el6.x86_64.rpm
   11  cd chef-repo/
   12  knife client list
   13  cd ..
   14  rm -rf chef-repo/
   15  unzip chef-starter.zip
   16  cd chef-repo/
   17  knife client list
   18  knife nodelist
   19  knife node list
   20  knife cookbook list
   21  knife cookbook create think
   22  git init
   23  cd cookbooks/
   24  ls
   25  cd think/
   26  ls
   27  cd recipes/
   28  ls
   29  vi default.rb
   30  knife cookbook test think
   31  knife cookbook upload  think
   32  knife cookbook delete think
   33  knife cookbook upload  think
   34  cp /home/ec2-user/shell.pem /root/
   35  knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
   36  knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
   37  knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
   38  knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
   39*
   40  history
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Chef-client pid: 2283
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 1 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:31:50+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Chef Run complete in 0.35214713 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/1 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Sending resource update report (run-id: 98d0ef36-6c0a-437c-9512-d01f270454f4)
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Chef-client pid: 2645
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 2 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:32:30+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216   * linux_user[nag] action create[2017-11-11T05:32:30+00:00] INFO: Processing linux_user[nag] action create (think::default line 19)
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: linux_user[nag] created
54.243.15.216
54.243.15.216     - create user nag
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Chef Run complete in 0.472534973 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 1/2 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Sending resource update report (run-id: 28dabc85-fa7c-4b96-912a-d207c3096afe)







root@ip-172-31-74-199:~# chef-client -o think@0.220.0
[2017-11-11T05:49:58+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:49:58+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:49:58+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:49:58+00:00] INFO: Chef-client pid: 2968
[2017-11-11T05:49:58+00:00] INFO: The plugin path /etc/chef/ohai/plugins does no                                                                                        t exist. Skipping...
[2017-11-11T05:50:00+00:00] WARN: Run List override has been provided.
[2017-11-11T05:50:00+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:50:00+00:00] WARN: Overridden Run List: [recipe[think@0.220.0]]
[2017-11-11T05:50:00+00:00] INFO: Run List is [recipe[think@0.220.0]]
[2017-11-11T05:50:00+00:00] INFO: Run List expands to [think@0.220.0]
[2017-11-11T05:50:00+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:50:00+00:00] INFO: Running start handlers
[2017-11-11T05:50:00+00:00] INFO: Start handlers complete.
[2017-11-11T05:50:00+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:50:00+00:00] INFO: Error while reporting run start to Data Collec                                                                                        tor. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 4                                                                                        04 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.220.0"]
[2017-11-11T05:50:00+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T05:50:00+00:00] INFO: Skipping removal of obsoleted cookbooks from t                                                                                        he cache
Synchronizing Cookbooks:
[2017-11-11T05:50:00+00:00] INFO: Storing updated cookbooks/think/recipes/defaul                                                                                        t.rb in the cache.
[2017-11-11T05:50:00+00:00] INFO: Storing updated cookbooks/think/metadata.rb in                                                                                         the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/think/recipes/default.rb
================================================================================

NoMethodError
-------------
undefined method `content' for Chef::Resource::Directory

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/think/recipes/default.rb:15:in `block in from_file'
  /var/chef/cache/cookbooks/think/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/think/recipes/default.rb:

  8:  #
  9:
 10:
 11:  directory  "/root/chef"do
 12:
 13:  action :create
 14:
 15>> content "hello welcome to chef world"
 16:
 17:  end
 18:
 19:  file '/root/chef/nagendra'do
 20:
 21:  action :create
 22:
 23:  content "welcomet devops world"
 24:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=2963;start=05:49:58;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T05:50:00+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T05:50:00+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T05:50:00+00:00] INFO: Sending resource update report (run-id: ed0c5b                                                                                        8d-9b7c-46a7-b10b-5111104813df)
[2017-11-11T05:50:00+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-sta                                                                                        cktrace.out
[2017-11-11T05:50:00+00:00] FATAL: Please provide the contents of the stacktrace                                                                                        .out file if you file a bug report
[2017-11-11T05:50:00+00:00] ERROR: undefined method `content' for Chef::Resource                                                                                        ::Directory
[2017-11-11T05:50:00+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef ru                                                                                        n process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.220.0
[2017-11-11T05:52:15+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:52:15+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:52:15+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:52:15+00:00] INFO: Chef-client pid: 3276
[2017-11-11T05:52:15+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T05:52:17+00:00] WARN: Run List override has been provided.
[2017-11-11T05:52:17+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:52:17+00:00] WARN: Overridden Run List: [recipe[think@0.220.0]]
[2017-11-11T05:52:17+00:00] INFO: Run List is [recipe[think@0.220.0]]
[2017-11-11T05:52:17+00:00] INFO: Run List expands to [think@0.220.0]
[2017-11-11T05:52:17+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:52:17+00:00] INFO: Running start handlers
[2017-11-11T05:52:17+00:00] INFO: Start handlers complete.
[2017-11-11T05:52:17+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:52:17+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.220.0"]
[2017-11-11T05:52:17+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T05:52:17+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T05:52:17+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T05:52:17+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 3 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T05:52:17+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/chef/nagendra] action create[2017-11-11T05:52:17+00:00] INFO: Processing file[/root/chef/nagendra] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'file[/root/chef/nagendra]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: file '/root/chef/nagendra'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    file("/root/chef/nagendra") do
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      declared_type :file
      cookbook_name "think"
      recipe_name "default"
      content "welcomet devops world"
      path "/root/chef/nagendra"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=3271;start=05:52:15;
    executable=/opt/chef/bin/chef-client

[2017-11-11T05:52:17+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T05:52:17+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T05:52:17+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T05:52:17+00:00] INFO: Sending resource update report (run-id: c8a274fa-e1ef-4a98-bc11-ab24dbf3a0eb)
[2017-11-11T05:52:17+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T05:52:17+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T05:52:17+00:00] ERROR: file[/root/chef/nagendra] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T05:52:17+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# ls /root/
chef
root@ip-172-31-74-199:~# chef-client -o think@0.220.0
[2017-11-11T05:54:15+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:54:15+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:54:15+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:54:15+00:00] INFO: Chef-client pid: 3586
[2017-11-11T05:54:15+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T05:54:17+00:00] WARN: Run List override has been provided.
[2017-11-11T05:54:17+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:54:17+00:00] WARN: Overridden Run List: [recipe[think@0.220.0]]
[2017-11-11T05:54:17+00:00] INFO: Run List is [recipe[think@0.220.0]]
[2017-11-11T05:54:17+00:00] INFO: Run List expands to [think@0.220.0]
[2017-11-11T05:54:17+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:54:17+00:00] INFO: Running start handlers
[2017-11-11T05:54:17+00:00] INFO: Start handlers complete.
[2017-11-11T05:54:17+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:54:17+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.220.0"]
[2017-11-11T05:54:17+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T05:54:17+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T05:54:17+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T05:54:17+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 3 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T05:54:17+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T05:54:17+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
[2017-11-11T05:54:17+00:00] INFO: file[/root/nag] created file /root/nag

    - create new file /root/nag[2017-11-11T05:54:17+00:00] INFO: file[/root/nag] updated file contents /root/nag

    - update content in file /root/nag from none to 2c8a11
    --- /root/nag       2017-11-11 05:54:17.283708618 +0000
    +++ /root/.chef-nag20171111-3586-vuvphn     2017-11-11 05:54:17.283708618 +0000
    @@ -1 +1,2 @@
    +welcomet devops world
  * linux_user[nagendra] action create[2017-11-11T05:54:17+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
[2017-11-11T05:54:17+00:00] INFO: linux_user[nagendra] created

    - create user nagendra
[2017-11-11T05:54:17+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T05:54:17+00:00] INFO: Chef Run complete in 0.224890344 seconds
[2017-11-11T05:54:17+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T05:54:17+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T05:54:17+00:00] INFO: Report handlers complete
Chef Client finished, 2/3 resources updated in 01 seconds
[2017-11-11T05:54:17+00:00] INFO: Sending resource update report (run-id: c4ca27c5-4813-4c29-b424-61405014c7e1)



code 3:

root@ip-172-31-74-199:~# chef-client -o think@0.3.0
[2017-11-11T05:57:27+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T05:57:27+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T05:57:27+00:00] INFO: Platform: x86_64-linux
[2017-11-11T05:57:27+00:00] INFO: Chef-client pid: 3900
[2017-11-11T05:57:27+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T05:57:28+00:00] WARN: Run List override has been provided.
[2017-11-11T05:57:28+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T05:57:28+00:00] WARN: Overridden Run List: [recipe[think@0.3.0]]
[2017-11-11T05:57:28+00:00] INFO: Run List is [recipe[think@0.3.0]]
[2017-11-11T05:57:28+00:00] INFO: Run List expands to [think@0.3.0]
[2017-11-11T05:57:28+00:00] INFO: Starting Chef Run for positive
[2017-11-11T05:57:28+00:00] INFO: Running start handlers
[2017-11-11T05:57:28+00:00] INFO: Start handlers complete.
[2017-11-11T05:57:28+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T05:57:28+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.3.0"]
[2017-11-11T05:57:28+00:00] INFO: Loading cookbooks [think@0.3.0]
[2017-11-11T05:57:28+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T05:57:28+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T05:57:29+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
  - think (0.3.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T05:57:29+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 4 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T05:57:29+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T05:57:29+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
 (up to date)
  * linux_user[nagendra] action create[2017-11-11T05:57:29+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
 (up to date)
  * apt_package[apache2] action install[2017-11-11T05:57:29+00:00] INFO: Processing apt_package[apache2] action install (think::default line 33)
[2017-11-11T05:57:39+00:00] INFO: apt_package[apache2] installed apache2 at 2.4.18-2ubuntu3.5

    - install version 2.4.18-2ubuntu3.5 of package apache2
[2017-11-11T05:57:39+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T05:57:39+00:00] INFO: Chef Run complete in 10.236128516 seconds
[2017-11-11T05:57:39+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T05:57:39+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T05:57:39+00:00] INFO: Report handlers complete
Chef Client finished, 1/4 resources updated in 11 seconds
[2017-11-11T05:57:39+00:00] INFO: Sending resource update report (run-id: 5ab986af-6ac1-411c-8720-fb0a7389e23a)



2017-11-11T05:57:39+00:00] INFO: Report handlers complete
Chef Client finished, 1/4 resources updated in 11 seconds
[2017-11-11T05:57:39+00:00] INFO: Sending resource update report (run-id: 5ab986af-6ac1-411c-8720-fb0a7389e23a)
root@ip-172-31-74-199:~# chef-client -r think
[2017-11-11T06:08:23+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:08:23+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:08:23+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:08:23+00:00] INFO: Chef-client pid: 14853
[2017-11-11T06:08:23+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:08:24+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003f3db78 @version=nil, @type=:recipe, @name="think">] from CLI options
[2017-11-11T06:08:24+00:00] INFO: Run List is [recipe[think]]
[2017-11-11T06:08:24+00:00] INFO: Run List expands to [think]
[2017-11-11T06:08:24+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:08:24+00:00] INFO: Running start handlers
[2017-11-11T06:08:24+00:00] INFO: Start handlers complete.
[2017-11-11T06:08:24+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:08:24+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think"]
[2017-11-11T06:08:25+00:00] INFO: Loading cookbooks [think@0.220.0]
Synchronizing Cookbooks:
[2017-11-11T06:08:25+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T06:08:25+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:08:25+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 3 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T06:08:25+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T06:08:25+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
 (up to date)
  * linux_user[nagendra] action create[2017-11-11T06:08:25+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
 (up to date)
[2017-11-11T06:08:25+00:00] INFO: Chef Run complete in 0.874268957 seconds

Running handlers:
[2017-11-11T06:08:25+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:08:25+00:00] INFO: Report handlers complete
Chef Client finished, 0/3 resources updated in 02 seconds
[2017-11-11T06:08:25+00:00] INFO: Sending resource update report (run-id: 6cad4ba2-77ae-410b-8588-659b917769df)
root@ip-172-31-74-199:~# chef-client -r think@0.4.0
[2017-11-11T06:08:40+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:08:40+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:08:40+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:08:40+00:00] INFO: Chef-client pid: 15159
[2017-11-11T06:08:40+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:08:42+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000001ae04b0 @version="0.4.0", @type=:recipe, @name="think">] from CLI options
[2017-11-11T06:08:42+00:00] INFO: Run List is [recipe[think@0.4.0]]
[2017-11-11T06:08:42+00:00] INFO: Run List expands to [think@0.4.0]
[2017-11-11T06:08:42+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:08:42+00:00] INFO: Running start handlers
[2017-11-11T06:08:42+00:00] INFO: Start handlers complete.
[2017-11-11T06:08:42+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:08:42+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.4.0"]
[2017-11-11T06:08:42+00:00] INFO: Loading cookbooks [think@0.4.0]
Synchronizing Cookbooks:
[2017-11-11T06:08:42+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T06:08:42+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
  - think (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/think/recipes/default.rb
================================================================================

NoMethodError
-------------
undefined method `actiont' for Chef::Resource::Service

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/think/recipes/default.rb:41:in `block in from_file'
  /var/chef/cache/cookbooks/think/recipes/default.rb:39:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/think/recipes/default.rb:

 34:
 35:  action :install
 36:
 37:  end
 38:
 39:  service "apache2"do
 40:
 41>> actiont [ :enable, :start]
 42:
 43:  end
 44:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=15154;start=06:08:40;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T06:08:42+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T06:08:42+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T06:08:42+00:00] INFO: Sending resource update report (run-id: b280a923-e781-403d-b388-8501bd6c756f)
[2017-11-11T06:08:42+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T06:08:42+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T06:08:42+00:00] ERROR: undefined method `actiont' for Chef::Resource::Service
[2017-11-11T06:08:42+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r think@0.4.0
[2017-11-11T06:10:08+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T06:10:08+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T06:10:08+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:10:08+00:00] INFO: Chef-client pid: 15463
[2017-11-11T06:10:08+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T06:10:09+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x00000000046ab450 @version="0.4.0", @type=:recipe, @name="think">] from CLI options
[2017-11-11T06:10:09+00:00] INFO: Run List is [recipe[think@0.4.0]]
[2017-11-11T06:10:09+00:00] INFO: Run List expands to [think@0.4.0]
[2017-11-11T06:10:09+00:00] INFO: Starting Chef Run for positive
[2017-11-11T06:10:09+00:00] INFO: Running start handlers
[2017-11-11T06:10:09+00:00] INFO: Start handlers complete.
[2017-11-11T06:10:09+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T06:10:09+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.4.0"]
[2017-11-11T06:10:09+00:00] INFO: Loading cookbooks [think@0.4.0]
Synchronizing Cookbooks:
[2017-11-11T06:10:09+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T06:10:09+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T06:10:09+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * file[/root/nag] action create[2017-11-11T06:10:09+00:00] INFO: Processing file[/root/nag] action create (think::default line 18)
 (up to date)
  * linux_user[nagendra] action create[2017-11-11T06:10:09+00:00] INFO: Processing linux_user[nagendra] action create (think::default line 26)
 (up to date)
  * apt_package[apache2] action install[2017-11-11T06:10:09+00:00] INFO: Processing apt_package[apache2] action install (think::default line 33)
 (up to date)
  * service[apache2] action enable[2017-11-11T06:10:09+00:00] INFO: Processing service[apache2] action enable (think::default line 39)
 (up to date)
  * service[apache2] action start[2017-11-11T06:10:09+00:00] INFO: Processing service[apache2] action start (think::default line 39)
 (up to date)
[2017-11-11T06:10:09+00:00] INFO: Chef Run complete in 0.539883426 seconds

Running handlers:
[2017-11-11T06:10:09+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T06:10:09+00:00] INFO: Report handlers complete
Chef Client finished, 0/6 resources updated in 01 seconds
[2017-11-11T06:10:09+00:00] INFO: Sending resource update report (run-id: b0d62a78-5438-4a70-a03e-78759a6f3816)
root@ip-172-31-74-199:~# service apache2 status
? apache2.service - LSB: Apache2 web server
   Loaded: loaded (/etc/init.d/apache2; bad; vendor preset: enabled)
  Drop-In: /lib/systemd/system/apache2.service.d
           +-apache2-systemd.conf
   Active: active (running) since Sat 2017-11-11 05:57:38 UTC; 12min ago
     Docs: man:systemd-sysv-generator(8)
    Tasks: 55
   Memory: 6.5M
      CPU: 299ms
   CGroup: /system.slice/apache2.service
           +-14610 /usr/sbin/apache2 -k start
           +-14613 /usr/sbin/apache2 -k start
           +-14614 /usr/sbin/apache2 -k start

Nov 11 05:57:37 ip-172-31-74-199 systemd[1]: Starting LSB: Apache2 web server...
Nov 11 05:57:37 ip-172-31-74-199 apache2[14586]:  * Starting Apache httpd web server apache2
Nov 11 05:57:38 ip-172-31-74-199 apache2[14586]:  *
Nov 11 05:57:38 ip-172-31-74-199 systemd[1]: Started LSB: Apache2 web server.





































    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17217;start=09:01:54;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:01:56+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:01:56+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:01:56+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:01:56+00:00] INFO: Sending resource update report (run-id: 4076b61c-f83f-4478-b3a5-82cbf2d58962)
[2017-11-11T09:01:56+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:01:56+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:01:56+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:01:56+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:03:02+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:02+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:02+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:02+00:00] INFO: Chef-client pid: 17535
[2017-11-11T09:03:02+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:04+00:00] WARN: Run List override has been provided.
[2017-11-11T09:03:04+00:00] WARN: Original Run List: [recipe[package]]
[2017-11-11T09:03:04+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:03:04+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:04+00:00] INFO: Running start handlers
[2017-11-11T09:03:04+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:04+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:03:04+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:03:04+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:03:04+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:03:04+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:03:04+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=17530;start=09:03:02;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:03:04+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:03:04+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:04+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:04+00:00] INFO: Sending resource update report (run-id: 03600e09-9eb8-4298-bb5f-90afe7adf9fe)
[2017-11-11T09:03:04+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:04+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:04+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:03:04+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r think::mul
[2017-11-11T09:03:47+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:03:47+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:03:47+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:03:47+00:00] INFO: Chef-client pid: 17853
[2017-11-11T09:03:47+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:03:48+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003bd3528 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:03:48+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:03:48+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:03:48+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:03:48+00:00] INFO: Running start handlers
[2017-11-11T09:03:48+00:00] INFO: Start handlers complete.
[2017-11-11T09:03:48+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:03:48+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:03:49+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its is no longer in the cookbook manifest.
[2017-11-11T09:03:49+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its is no longer in the cookbook manifest.
Synchronizing Cookbooks:
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:03:49+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=17848;start=09:03:47;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:03:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:03:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:03:49+00:00] INFO: Sending resource update report (run-id: e914560b-9be6-4d80-8234-51418eaf54ea)
[2017-11-11T09:03:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:03:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:03:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:03:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client
[2017-11-11T09:04:06+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:04:06+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:04:06+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:04:06+00:00] INFO: Chef-client pid: 18157
[2017-11-11T09:04:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:04:07+00:00] INFO: Run List is [recipe[package]]
[2017-11-11T09:04:07+00:00] INFO: Run List expands to [package]
[2017-11-11T09:04:07+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:04:07+00:00] INFO: Running start handlers
[2017-11-11T09:04:07+00:00] INFO: Start handlers complete.
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:04:07+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package"]
[2017-11-11T09:04:07+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:04:07+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T09:04:07+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:04:07+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * apt_package[httpd] action install[2017-11-11T09:04:07+00:00] INFO: Processing apt_package[httpd] action install (package::default line 11)


    ================================================================================
    Error executing action `install` on resource 'apt_package[httpd]'
    ================================================================================

    Chef::Exceptions::Package
    -------------------------
    httpd is a virtual package provided by multiple packages, you must explicitly select one

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/package/recipes/default.rb

     11: package "httpd"do
     12:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/package/recipes/default.rb:11:in `from_file'

    apt_package("httpd") do
      package_name "httpd"
      action [:install]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      declared_type :package
      cookbook_name "package"
      recipe_name "default"
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=18152;start=09:04:06;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:04:08+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:04:08+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:04:08+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:04:08+00:00] INFO: Sending resource update report (run-id: 736ce9e2-15c3-4ff2-b2ca-5b1ce07dd878)
[2017-11-11T09:04:08+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:04:08+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:04:08+00:00] ERROR: apt_package[httpd] (package::default line 11) had an error: Chef::Exceptions::Package: httpd is a virtual package provided by multiple packages, you must explicitly select one
[2017-11-11T09:04:08+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:05:43+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:05:43+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:05:43+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:05:43+00:00] INFO: Chef-client pid: 18477
[2017-11-11T09:05:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:05:44+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000004f9a908 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:05:44+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:05:44+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:05:44+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:05:44+00:00] INFO: Running start handlers
[2017-11-11T09:05:44+00:00] INFO: Start handlers complete.
[2017-11-11T09:05:44+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:05:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:05:44+00:00] INFO: Loading cookbooks [think@0.220.0]
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/recipes/ser.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/files/default/index.html from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:05:44+00:00] INFO: Removing cookbooks/package/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/README.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/CHANGELOG.md in the cache.
[2017-11-11T09:05:45+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18472;start=09:05:43;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:05:45+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:05:45+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:05:45+00:00] INFO: Sending resource update report (run-id: 7e63a2ba-67d2-4ab1-ba48-ce628989db75)
[2017-11-11T09:05:45+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:05:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:05:45+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:05:45+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r recipe[think::mul]
[2017-11-11T09:06:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:06:48+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:06:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:06:48+00:00] INFO: Chef-client pid: 18786
[2017-11-11T09:06:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:06:49+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x00000000035d6d78 @version=nil, @type=:recipe, @name="think::mul">] from CLI options
[2017-11-11T09:06:49+00:00] INFO: Run List is [recipe[think::mul]]
[2017-11-11T09:06:49+00:00] INFO: Run List expands to [think::mul]
[2017-11-11T09:06:49+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:06:49+00:00] INFO: Running start handlers
[2017-11-11T09:06:49+00:00] INFO: Start handlers complete.
[2017-11-11T09:06:49+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:06:49+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think::mul"]
[2017-11-11T09:06:49+00:00] INFO: Loading cookbooks [think@0.220.0]
Synchronizing Cookbooks:
  - think (0.220.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error
================================================================================

Chef::Exceptions::RecipeNotFound
--------------------------------
could not find recipe mul for cookbook think

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=18781;start=09:06:48;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:06:49+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:06:49+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:06:49+00:00] INFO: Sending resource update report (run-id: f8b86f80-e4ec-4df2-9c31-728a2b8a3950)
[2017-11-11T09:06:49+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:06:49+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:06:49+00:00] ERROR: could not find recipe mul for cookbook think
[2017-11-11T09:06:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -o think@0.6.0
[2017-11-11T09:07:08+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:07:08+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:07:08+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:07:08+00:00] INFO: Chef-client pid: 19089
[2017-11-11T09:07:08+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:07:09+00:00] WARN: Run List override has been provided.
[2017-11-11T09:07:09+00:00] WARN: Original Run List: [recipe[think]]
[2017-11-11T09:07:09+00:00] WARN: Overridden Run List: [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List is [recipe[think@0.6.0]]
[2017-11-11T09:07:09+00:00] INFO: Run List expands to [think@0.6.0]
[2017-11-11T09:07:09+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:07:09+00:00] INFO: Running start handlers
[2017-11-11T09:07:09+00:00] INFO: Start handlers complete.
[2017-11-11T09:07:09+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:07:09+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["think@0.6.0"]
[2017-11-11T09:07:10+00:00] INFO: Loading cookbooks [think@0.6.0]
[2017-11-11T09:07:10+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/templates/default/index.html.erb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/metadata.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/files/default/sample.war in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
[2017-11-11T09:07:10+00:00] INFO: Storing updated cookbooks/think/recipes/mul.rb in the cache.
  - think (0.6.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T09:07:10+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 5 resources
Recipe: think::default
  * directory[/root/chef] action create[2017-11-11T09:07:10+00:00] INFO: Processing directory[/root/chef] action create (think::default line 11)
 (up to date)
  * cookbook_file[/root/chef/sample.war] action create[2017-11-11T09:07:10+00:00] INFO: Processing cookbook_file[/root/chef/sample.war] action create (think::default line 18)

    * Parent directory /root/chef does not exist.
    ================================================================================
    Error executing action `create` on resource 'cookbook_file[/root/chef/sample.war]'
    ================================================================================

    Chef::Exceptions::EnclosingDirectoryDoesNotExist
    ------------------------------------------------
    Parent directory /root/chef does not exist.

    Resource Declaration:
    ---------------------
    # In /var/chef/cache/cookbooks/think/recipes/default.rb

     18: cookbook_file '/root/chef/sample.war'do
     19:

    Compiled Resource:
    ------------------
    # Declared in /var/chef/cache/cookbooks/think/recipes/default.rb:18:in `from_file'

    cookbook_file("/root/chef/sample.war") do
      provider Chef::Provider::CookbookFile
      action [:create]
      retries 0
      retry_delay 2
      default_guard_interpreter :default
      source "sample.war"
      declared_type :cookbook_file
      cookbook_name "think"
      recipe_name "default"
      path "/root/chef/sample.war"
      owner nil
      group nil
      mode nil
      verifications []
    end

    System Info:
    ------------
    chef_version=12.21.26
    platform=ubuntu
    platform_version=16.04
    ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
    program_name=chef-client worker: ppid=19084;start=09:07:08;
    executable=/opt/chef/bin/chef-client

[2017-11-11T09:07:10+00:00] INFO: Running queued delayed notifications before re-raising exception

Running handlers:
[2017-11-11T09:07:10+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:07:10+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:07:10+00:00] INFO: Sending resource update report (run-id: c0b76063-6e31-40e2-a184-edf24fd6dabf)
[2017-11-11T09:07:10+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:07:10+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:07:10+00:00] ERROR: cookbook_file[/root/chef/sample.war] (think::default line 18) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory /root/chef does not exist.
[2017-11-11T09:07:10+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:18:39+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:18:39+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:18:39+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:18:39+00:00] INFO: Chef-client pid: 19400
[2017-11-11T09:18:39+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:18:40+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003d3a308 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:18:40+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:18:40+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:18:40+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:18:40+00:00] INFO: Running start handlers
[2017-11-11T09:18:40+00:00] INFO: Start handlers complete.
[2017-11-11T09:18:40+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:18:40+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:18:40+00:00] INFO: Loading cookbooks [multi@0.1.0]
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/metadata.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/recipes/mul.rb from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/files/default/sample.war from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/README.md from the cache; its cookbook is no longer needed on this client.
[2017-11-11T09:18:40+00:00] INFO: Removing cookbooks/think/templates/default/index.html.erb from the cache; its cookbook is no longer needed on this client.
Synchronizing Cookbooks:
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/templates/default/index.html.erb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/CHANGELOG.md in the cache.
[2017-11-11T09:18:40+00:00] INFO: Storing updated cookbooks/multi/metadata.rb in the cache.
[2017-11-11T09:18:41+00:00] INFO: Storing updated cookbooks/multi/README.md in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name = apache2
 12:  service_name = apache2
 13:  document_root = "/var/www/hmtl"
 14:
 15:  if node [" paltform "] == "amazon"
 16:
 17:  package_name = httpd
 18:  service_name = httpd
 19:  document_root = "/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19395;start=09:18:39;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:18:41+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:18:41+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:18:41+00:00] INFO: Sending resource update report (run-id: 741df3b7-eb45-432e-8803-3d377633b0a4)
[2017-11-11T09:18:41+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:18:41+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:18:41+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:18:41+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
root@ip-172-31-74-199:~# chef-client -r multi
[2017-11-11T09:22:37+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T09:22:37+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T09:22:37+00:00] INFO: Platform: x86_64-linux
[2017-11-11T09:22:37+00:00] INFO: Chef-client pid: 19711
[2017-11-11T09:22:37+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T09:22:39+00:00] INFO: Setting the run_list to [#<Chef::RunList::RunListItem:0x0000000003eb6d58 @version=nil, @type=:recipe, @name="multi">] from CLI options
[2017-11-11T09:22:39+00:00] INFO: Run List is [recipe[multi]]
[2017-11-11T09:22:39+00:00] INFO: Run List expands to [multi]
[2017-11-11T09:22:39+00:00] INFO: Starting Chef Run for positive
[2017-11-11T09:22:39+00:00] INFO: Running start handlers
[2017-11-11T09:22:39+00:00] INFO: Start handlers complete.
[2017-11-11T09:22:39+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T09:22:39+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["multi"]
[2017-11-11T09:22:39+00:00] INFO: Loading cookbooks [multi@0.1.0]
Synchronizing Cookbooks:
[2017-11-11T09:22:39+00:00] INFO: Storing updated cookbooks/multi/recipes/default.rb in the cache.
  - multi (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /var/chef/cache/cookbooks/multi/recipes/default.rb
================================================================================

NameError
---------
No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'

Cookbook Trace:
---------------
  /var/chef/cache/cookbooks/multi/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/var/chef/cache/cookbooks/multi/recipes/default.rb:

  4:  #
  5:  # Copyright 2017, YOUR_COMPANY_NAME
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:
 10:
 11>> package_name=apache2
 12:  service_name=apache2
 13:  document_root="/var/www/hmtl"
 14:
 15:  if node["paltform"] == "amazon"
 16:
 17:  package_name=httpd
 18:  service_name=httpd
 19:  document_root="/var/www/hmtl"
 20:

System Info:
------------
chef_version=12.21.26
platform=ubuntu
platform_version=16.04
ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
program_name=chef-client worker: ppid=19706;start=09:22:37;
executable=/opt/chef/bin/chef-client


Running handlers:
[2017-11-11T09:22:39+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T09:22:39+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T09:22:39+00:00] INFO: Sending resource update report (run-id: 16f4ce9e-d444-46d0-9bfc-8bffca3ec73c)
[2017-11-11T09:22:39+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T09:22:39+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T09:22:39+00:00] ERROR: No resource, method, or local variable named `apache2' for `Chef::Recipe "default"'
[2017-11-11T09:22:39+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)



chef-bootstrap a node:


[root@ip-172-31-64-176 chef-repo]# knife cookbook create think
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook think in /root/chef-repo/cookbooks
** Creating README for cookbook: think
** Creating CHANGELOG for cookbook: think
** Creating metadata for cookbook: think
[root@ip-172-31-64-176 chef-repo]# git init
Initialized empty Git repository in /root/chef-repo/.git/
[root@ip-172-31-64-176 chef-repo]# cd cookbooks/
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd think/
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook delete think
Do you really want to delete think version 0.1.0? (Y/N) y
Deleted cookbook[think version 0.1.0]
[root@ip-172-31-64-176 recipes]# knife cookbook upload  think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cp /home/ec2-user/shell.pem /root/
[root@ip-172-31-64-176 recipes]# knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
ERROR: Must pass an FQDN or ip to bootstrap
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216--sudo
ERROR: Network Error: getaddrinfo: Name or service not known
Check your knife configuration and network settings
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Installing Chef Omnibus (-v 12)
54.243.15.216 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.243.15.216   to file /tmp/install.sh.1531/install.sh
54.243.15.216 trying wget...
54.243.15.216 ubuntu 16.04 x86_64
54.243.15.216 Getting information for chef stable 12 for ubuntu...
54.243.15.216 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=ubuntu&pv=16.04&m=x86_64
54.243.15.216   to file /tmp/install.sh.1535/metadata.txt
54.243.15.216 trying wget...
54.243.15.216 sha1      b21baa643ef453f488351cd5623756e19ebec749
54.243.15.216 sha256    f2320ba894d92e4fd8fbae81546a70f124754cd40be388ba44de8180fbc2ea4d
54.243.15.216 url       https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216 version   12.21.26
54.243.15.216 downloaded metadata file looks valid...
54.243.15.216 downloading https://packages.chef.io/files/stable/chef/12.21.26/ubuntu/16.04/chef_12.21.26-1_amd64.deb
54.243.15.216   to file /tmp/install.sh.1535/chef_12.21.26-1_amd64.deb
54.243.15.216 trying wget...
54.243.15.216 Comparing checksum with sha256sum...
54.243.15.216 Installing chef 12
54.243.15.216 installing with dpkg...
54.243.15.216 Selecting previously unselected package chef.
(Reading database ... 51071 files and directories currently installed.)
54.243.15.216 Preparing to unpack .../chef_12.21.26-1_amd64.deb ...
54.243.15.216 Unpacking chef (12.21.26-1) ...
54.243.15.216 Setting up chef (12.21.26-1) ...
54.243.15.216 Thank you for installing Chef!
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: Chef-client pid: 1617
54.243.15.216 [2017-11-11T05:26:43+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Setting the run_list to [] from CLI options
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List is []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Run List expands to []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: []
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Loading cookbooks []
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:26:44+00:00] WARN: Node positive has an empty run list.
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 0 resources
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Chef Run complete in 0.376994307 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/0 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:26:44+00:00] INFO: Sending resource update report (run-id: 27d1ea9d-6d56-4b69-b56b-a9fbd53639a2)
[root@ip-172-31-64-176 recipes]# knife node run list add positive think
positive:
  run_list: recipe[think]
[root@ip-172-31-64-176 recipes]# history
    1  ping in.com
    2  cat /etc/issue
    3  git --version
    4  wget https://packages.chef.io/files/stable/chefdk/1.5.0/el/6/chefdk-1.5.0-1.el6.x86_64.rpm
    5  rpm -vih chefdk-1.5.0-1.el6.x86_64.rpm
    6  git pull https://github.com/Thinkpositvie/chefrepo.git
    7  git init
    8  git pull https://github.com/Thinkpositvie/chefrepo.git
    9  ls
   10  rm chefdk-1.5.0-1.el6.x86_64.rpm
   11  cd chef-repo/
   12  knife client list
   13  cd ..
   14  rm -rf chef-repo/
   15  unzip chef-starter.zip
   16  cd chef-repo/
   17  knife client list
   18  knife nodelist
   19  knife node list
   20  knife cookbook list
   21  knife cookbook create think
   22  git init
   23  cd cookbooks/
   24  ls
   25  cd think/
   26  ls
   27  cd recipes/
   28  ls
   29  vi default.rb
   30  knife cookbook test think
   31  knife cookbook upload  think
   32  knife cookbook delete think
   33  knife cookbook upload  think
   34  cp /home/ec2-user/shell.pem /root/
   35  knife bootstrap --sudo -x ec2-user -i /root/shell.pem -N "positive"
   36  knife bootstrap 54.243.15.216--sudo -x ec2-user -i /root/shell.pem -N "positive"
   37  knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive"
   38  knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive"
   39*
   40  history
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ec2-user -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
Failed to authenticate ec2-user - trying password auth
Enter your password:
ERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@54.243.15.216@54.243.15.216
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: Chef-client pid: 2283
54.243.15.216 [2017-11-11T05:31:49+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 1 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:31:50+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Chef Run complete in 0.35214713 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 0/1 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:31:50+00:00] INFO: Sending resource update report (run-id: 98d0ef36-6c0a-437c-9512-d01f270454f4)
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.243.15.216 --sudo -x ubuntu -i /root/shell.pem -N "positive" -r recipe[think]
Node positive exists, overwrite it? (Y/N) y
Client positive exists, overwrite it? (Y/N) y
Creating new client for positive
Creating new node for positive
Connecting to 54.243.15.216
54.243.15.216 -----> Existing Chef installation detected
54.243.15.216 Starting the first Chef Client run...
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Forking chef instance to converge...
54.243.15.216 Starting Chef Client, version 12.21.26
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: *** Chef 12.21.26 ***
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Platform: x86_64-linux
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: Chef-client pid: 2645
54.243.15.216 [2017-11-11T05:32:28+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Setting the run_list to ["recipe[think]"] from CLI options
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List is [recipe[think]]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Run List expands to [think]
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Starting Chef Run for positive
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Running start handlers
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Start handlers complete.
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 [2017-11-11T05:32:29+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.243.15.216 resolving cookbooks for run list: ["think"]
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Loading cookbooks [think@0.1.0]
54.243.15.216 Synchronizing Cookbooks:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Storing updated cookbooks/think/recipes/default.rb in the cache.
54.243.15.216   - think (0.1.0)
54.243.15.216 Installing Cookbook Gems:
54.243.15.216 Compiling Cookbooks...
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.243.15.216 Converging 2 resources
54.243.15.216 Recipe: think::default
54.243.15.216   * file[/root/chef] action create[2017-11-11T05:32:30+00:00] INFO: Processing file[/root/chef] action create (think::default line 11)
54.243.15.216  (up to date)
54.243.15.216   * linux_user[nag] action create[2017-11-11T05:32:30+00:00] INFO: Processing linux_user[nag] action create (think::default line 19)
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: linux_user[nag] created
54.243.15.216
54.243.15.216     - create user nag
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Chef Run complete in 0.472534973 seconds
54.243.15.216
54.243.15.216 Running handlers:
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Running report handlers
54.243.15.216 Running handlers complete
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Report handlers complete
54.243.15.216 Chef Client finished, 1/2 resources updated in 01 seconds
54.243.15.216 [2017-11-11T05:32:30+00:00] INFO: Sending resource update report (run-id: 28dabc85-fa7c-4b96-912a-d207c3096afe)
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd -
/root/chef-repo/cookbooks/think/recipes
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think@0.2.0
ERROR: Could not find cookbook think@0.2.0 in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook test think
WARNING: DEPRECATED: Please use ChefSpec or Rubocop to syntax-check cookbooks.
checking think
Running syntax check on think
Validating ruby files
Validating templates
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.220.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.3.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# vi  metadata.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# vi recipes/default.rb
[root@ip-172-31-64-176 think]# knife cookbook upload think
Uploading think          [0.4.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 think]# chef-client -o think@0.4.0
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] WARN: Did not find config file: /etc/chef/client.rb, using command line options.
[2017-11-11T06:09:48+00:00] WARN: *****************************************
[2017-11-11T06:09:48+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.2
[2017-11-11T06:09:48+00:00] INFO: *** Chef 12.21.2 ***
[2017-11-11T06:09:48+00:00] INFO: Platform: x86_64-linux
[2017-11-11T06:09:48+00:00] INFO: Chef-client pid: 3372
[2017-11-11T06:09:48+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
Creating a new client identity for ip-172-31-64-176.ec2.internal using the validator key.
[2017-11-11T06:09:50+00:00] INFO: Client key /etc/chef/client.pem is not present - registering

================================================================================
Chef encountered an error attempting to create the client "ip-172-31-64-176.ec2.internal"
================================================================================

System Info:
------------
chef_version=12.21.2
ruby=ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]
program_name=chef-client worker: ppid=3367;start=06:09:48;
executable=/opt/chefdk/bin/chef-client


Running handlers:
[2017-11-11T06:09:50+00:00] ERROR: Running exception handlers
Running handlers complete
[2017-11-11T06:09:50+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated in 01 seconds
[2017-11-11T06:09:50+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2017-11-11T06:09:50+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2017-11-11T06:09:50+00:00] ERROR: I can't write your private key to /etc/chef/client.pem - check permissions?
[2017-11-11T06:09:50+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 think]# clear
[root@ip-172-31-64-176 think]# lss
-bash: lss: command not found
[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  templates
[root@ip-172-31-64-176 think]# wget https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
--2017-11-11 06:15:12--  https://tomcat.apache.org/tomcat-6.0-doc/appdev/sample/sample.war
Resolving tomcat.apache.org (tomcat.apache.org)... 140.211.11.105, 195.154.151.36, 2001:bc8:2142:300::
Connecting to tomcat.apache.org (tomcat.apache.org)|140.211.11.105|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4606 (4.5K)
Saving to: sample.war

sample.war                                100%[=====================================================================================>]   4.50K  --.-KB/s    in 0s

2017-11-11 06:15:13 (277 MB/s) - sample.war saved [4606/4606]

[root@ip-172-31-64-176 think]# ls
attributes  CHANGELOG.md  definitions  files  libraries  metadata.rb  providers  README.md  recipes  resources  sample.war  templates
[root@ip-172-31-64-176 think]# mv sample.war files/default/
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# ls
chefignore  starter  think
[root@ip-172-31-64-176 cookbooks]# cd -
/root/chef-repo/cookbooks/think
[root@ip-172-31-64-176 think]# cd files/
[root@ip-172-31-64-176 files]# ls
default
[root@ip-172-31-64-176 files]# cd default/
[root@ip-172-31-64-176 default]# ls
sample.war
[root@ip-172-31-64-176 default]# cd ..
[root@ip-172-31-64-176 files]# cd ..
[root@ip-172-31-64-176 think]# vi metadata.rb
[root@ip-172-31-64-176 think]# cd recipes/
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload think
Uploading think          [0.5.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 think]# cd..
-bash: cd..: command not found
[root@ip-172-31-64-176 think]# cd ..
[root@ip-172-31-64-176 cookbooks]# knife cookbook create package
WARN: This command is being deprecated in favor of `chef generate cookbook` and will soon return an error.
Please use `chef generate cookbook` instead of this command.
 at /opt/chefdk/embedded/lib/ruby/gems/2.3.0/gems/chef-12.21.2/lib/chef/knife.rb:443:in `block in run_with_pretty_exceptions'
** Creating cookbook package in /root/chef-repo/cookbooks
** Creating README for cookbook: package
** Creating CHANGELOG for cookbook: package
** Creating metadata for cookbook: package
[root@ip-172-31-64-176 cookbooks]# cd  package
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.1.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# cd ..
[root@ip-172-31-64-176 package]# vi metadata.rb
[root@ip-172-31-64-176 package]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239
ERROR: You must pass a node name with -N when bootstrapping with user credentials
[root@ip-172-31-64-176 package]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Installing Chef Omnibus (-v 12)
54.172.193.239 downloading https://omnitruck-direct.chef.io/chef/install.sh
54.172.193.239   to file /tmp/install.sh.2760/install.sh
54.172.193.239 trying wget...
54.172.193.239 el 6 x86_64
54.172.193.239 Getting information for chef stable 12 for el...
54.172.193.239 downloading https://omnitruck-direct.chef.io/stable/chef/metadata?v=12&p=el&pv=6&m=x86_64
54.172.193.239   to file /tmp/install.sh.2765/metadata.txt
54.172.193.239 trying wget...
54.172.193.239 sha1     e1f7d3c6ee99aedeac4ad8a950877af7edc8164c
54.172.193.239 sha256   6a47f8f88d3f4568defa13076a21a005bd48ee3e7100d3c66d8f0cc41554306e
54.172.193.239 url      https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 version  12.21.26
54.172.193.239 downloaded metadata file looks valid...
54.172.193.239 downloading https://packages.chef.io/files/stable/chef/12.21.26/el/6/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239   to file /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm
54.172.193.239 trying wget...
54.172.193.239 Comparing checksum with sha256sum...
54.172.193.239 Installing chef 12
54.172.193.239 installing with rpm...
54.172.193.239 warning: /tmp/install.sh.2765/chef-12.21.26-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
54.172.193.239 Preparing...                          ################################# [100%]
54.172.193.239 Updating / installing...
54.172.193.239    1:chef-12.21.26-1.el6              ################################# [100%]
54.172.193.239 Thank you for installing Chef!
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: Chef-client pid: 2837
54.172.193.239 [2017-11-11T06:37:36+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/README.md in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: Storing updated cookbooks/package/CHANGELOG.md in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:37:38+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:37:38+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239 [2017-11-11T06:37:39+00:00] INFO: yum_package[httpd] installing httpd-2.2.34-1.16.amzn1 from amzn-updates repository
54.172.193.239 [2017-11-11T06:37:42+00:00] INFO: yum_package[httpd] installed httpd at 2.2.34-1.16.amzn1
54.172.193.239
54.172.193.239     - install version 2.2.34-1.16.amzn1 of package httpd
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Chef Run complete in 4.65663913 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/1 resources updated in 06 seconds
54.172.193.239 [2017-11-11T06:37:43+00:00] INFO: Sending resource update report (run-id: c510a08d-e543-4dd9-99bf-989681c02f82)
[root@ip-172-31-64-176 package]# cd recipes/
[root@ip-172-31-64-176 recipes]# ls
default.rb
[root@ip-172-31-64-176 recipes]# vi ser.rb
[root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
==============================================================================================



node 2:



root@ip-172-31-64-176 recipes]# knife cookbook upload [package::ser.rb]
ERROR: Could not find cookbook [package::ser.rb] in your cookbook path, skipping it
Uploaded 0 cookbook.
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser.rb]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: Chef-client pid: 3256
54.172.193.239 [2017-11-11T06:41:21+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Setting the run_list to ["recipe[package::ser.rb]"] from CLI options
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List is [recipe[package::ser.rb]]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Run List expands to [package::ser.rb]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser.rb"]
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Storing updated cookbooks/package/recipes/ser.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239
54.172.193.239 ================================================================================
54.172.193.239 Recipe Compile Error
54.172.193.239 ================================================================================
54.172.193.239
54.172.193.239 Chef::Exceptions::RecipeNotFound
54.172.193.239 --------------------------------
54.172.193.239 could not find recipe ser.rb for cookbook package
54.172.193.239
54.172.193.239 System Info:
54.172.193.239 ------------
54.172.193.239 chef_version=12.21.26
54.172.193.239 platform=amazon
54.172.193.239 platform_version=2017.09
54.172.193.239 ruby=ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]
54.172.193.239 program_name=chef-client worker: ppid=3243;start=06:41:21;
54.172.193.239 executable=/opt/chef/bin/chef-client
54.172.193.239
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Running exception handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: Exception handlers complete
54.172.193.239 Chef Client failed. 0 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:23+00:00] INFO: Sending resource update report (run-id: e5ae0a22-54b9-4991-9328-3e4597e02a16)
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
54.172.193.239 [2017-11-11T06:41:23+00:00] ERROR: could not find recipe ser.rb for cookbook package
54.172.193.239 [2017-11-11T06:41:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::ser]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: Chef-client pid: 3569
54.172.193.239 [2017-11-11T06:41:50+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Setting the run_list to ["recipe[package::ser]"] from CLI options
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List is [recipe[package::ser]]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Run List expands to [package::ser]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::ser"]
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::ser
54.172.193.239   * service[httpd] action enable[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action enable (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] enabled
54.172.193.239
54.172.193.239     - enable service service[httpd]
54.172.193.239   * service[httpd] action start[2017-11-11T06:41:51+00:00] INFO: Processing service[httpd] action start (package::ser line 5)
54.172.193.239 [2017-11-11T06:41:51+00:00] INFO: service[httpd] started
54.172.193.239
54.172.193.239     - start service service[httpd]
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Chef Run complete in 0.530687637 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 2/2 resources updated in 01 seconds
54.172.193.239 [2017-11-11T06:41:52+00:00] INFO: Sending resource update report (run-id: 54c48c75-c388-4642-b415-5b71cf9a2941)
[root@ip-172-31-64-176 recipes]# cp ser.rb default.rb
cp: overwrite default.rb? n
[root@ip-172-31-64-176 recipes]# vi default.rb
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: Chef-client pid: 4334
54.172.193.239 [2017-11-11T06:49:29+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Setting the run_list to ["recipe[package]"] from CLI options
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List is [recipe[package]]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Run List expands to [package]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package"]
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:49:30+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:49:30+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Chef Run complete in 1.424903929 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:49:31+00:00] INFO: Sending resource update report (run-id: 71331b69-9302-439d-a0a0-e6759d14301c)
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: Chef-client pid: 4652
54.172.193.239 [2017-11-11T06:50:06+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:50:08+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 1 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:50:08+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Chef Run complete in 1.155891701 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 0/1 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:50:09+00:00] INFO: Sending resource update report (run-id: f813cfee-9531-4238-acdc-4dc4ec590f9f)
[root@ip-172-31-64-176 recipes]# knife cookbook upload package
Uploading package        [0.2.0]
Uploaded 1 cookbook.
[root@ip-172-31-64-176 recipes]# knife bootstrap 54.172.193.239 --sudo -x ec2-user -i /root/shell.pem -N "think" -r recipe[package::default]
Node think exists, overwrite it? (Y/N) y
Client think exists, overwrite it? (Y/N) y
Creating new client for think
Creating new node for think
Connecting to 54.172.193.239
54.172.193.239 -----> Existing Chef installation detected
54.172.193.239 Starting the first Chef Client run...
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Forking chef instance to converge...
54.172.193.239 Starting Chef Client, version 12.21.26
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: *** Chef 12.21.26 ***
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Platform: x86_64-linux
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: Chef-client pid: 4969
54.172.193.239 [2017-11-11T06:52:13+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Setting the run_list to ["recipe[package::default]"] from CLI options
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List is [recipe[package::default]]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Run List expands to [package::default]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Starting Chef Run for think
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Running start handlers
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Start handlers complete.
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
54.172.193.239 resolving cookbooks for run list: ["package::default"]
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Loading cookbooks [package@0.2.0]
54.172.193.239 Synchronizing Cookbooks:
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
54.172.193.239   - package (0.2.0)
54.172.193.239 Installing Cookbook Gems:
54.172.193.239 Compiling Cookbooks...
54.172.193.239 [2017-11-11T06:52:14+00:00] INFO: HTTP Request Returned 404 Not Found:
54.172.193.239 Converging 2 resources
54.172.193.239 Recipe: package::default
54.172.193.239   * yum_package[httpd] action install[2017-11-11T06:52:14+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
54.172.193.239  (up to date)
54.172.193.239   * file[/var/www/html/index.html] action create[2017-11-11T06:52:15+00:00] INFO: Processing file[/var/www/html/index.html] action create (package::default line 17)
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] created file /var/www/html/index.html
54.172.193.239
54.172.193.239     - create new file /var/www/html/index.html[2017-11-11T06:52:15+00:00] INFO: file[/var/www/html/index.html] updated file contents /var/www/html/index.html
54.172.193.239
54.172.193.239     - update content in file /var/www/html/index.html from none to b3046f
54.172.193.239     --- /var/www/html/index.html 2017-11-11 06:52:15.237958728 +0000
54.172.193.239     +++ /var/www/html/.chef-index20171111-4969-1oleakd.html      2017-11-11 06:52:15.233958737 +0000
54.172.193.239     @@ -1 +1,2 @@
54.172.193.239     + <html><body><h1> 'welcome to chef-world '</h1></body></html>
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Chef Run complete in 1.138662141 seconds
54.172.193.239
54.172.193.239 Running handlers:
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Running report handlers
54.172.193.239 Running handlers complete
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Report handlers complete
54.172.193.239 Chef Client finished, 1/2 resources updated in 02 seconds
54.172.193.239 [2017-11-11T06:52:15+00:00] INFO: Sending resource update report (run-id: f3f18758-0b83-48cb-9f5b-3cc94da733d3)


[root@ip-172-31-65-42 ~]# cat /var/www/html/index.html
 <html><body><h1> 'welcome to chef-world '</h1></body></html> [root@ip-172-31-65-42 ~]# cd ..
[root@ip-172-31-65-42 /]# cd -
/root
[root@ip-172-31-65-42 ~]# chef-client -o package@0.3.0
[2017-11-11T07:04:05+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:04:05+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:04:05+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:04:05+00:00] INFO: Chef-client pid: 5284
[2017-11-11T07:04:05+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:04:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:04:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:04:06+00:00] WARN: Overridden Run List: [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List is [recipe[package@0.3.0]]
[2017-11-11T07:04:06+00:00] INFO: Run List expands to [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:04:06+00:00] INFO: Running start handlers
[2017-11-11T07:04:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:04:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.3.0"]
[2017-11-11T07:04:06+00:00] INFO: Loading cookbooks [package@0.3.0]
[2017-11-11T07:04:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/files/default/index.html in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:04:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
  - package (0.3.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:04:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:04:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * cookbook_file[/var/www/html/index.html] action create[2017-11-11T07:04:07+00:00] INFO: Processing cookbook_file[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070407.508781
[2017-11-11T07:04:07+00:00] INFO: cookbook_file[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from b3046f to cf4a23
    --- /var/www/html/index.html        2017-11-11 06:52:15.233958737 +0000
    +++ /var/www/html/.chef-index20171111-5284-d8fvtb.html      2017-11-11 07:04:07.501825799 +0000
    @@ -1,2 +1,3 @@
    - <html><body><h1> 'welcome to chef-world '</h1></body></html>
    +<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>
    +
[2017-11-11T07:04:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:04:07+00:00] INFO: Chef Run complete in 1.207128394 seconds
[2017-11-11T07:04:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:04:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:04:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:04:07+00:00] INFO: Sending resource update report (run-id: 241f3965-9834-434b-a0e6-335244c7639f)
[root@ip-172-31-65-42 ~]# chef-client -o package@0.4.0
[2017-11-11T07:09:04+00:00] INFO: Forking chef instance to converge...
Starting Chef Client, version 12.21.26
[2017-11-11T07:09:04+00:00] INFO: *** Chef 12.21.26 ***
[2017-11-11T07:09:04+00:00] INFO: Platform: x86_64-linux
[2017-11-11T07:09:04+00:00] INFO: Chef-client pid: 5588
[2017-11-11T07:09:04+00:00] INFO: The plugin path /etc/chef/ohai/plugins does not exist. Skipping...
[2017-11-11T07:09:06+00:00] WARN: Run List override has been provided.
[2017-11-11T07:09:06+00:00] WARN: Original Run List: [recipe[package::default]]
[2017-11-11T07:09:06+00:00] WARN: Overridden Run List: [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List is [recipe[package@0.4.0]]
[2017-11-11T07:09:06+00:00] INFO: Run List expands to [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Starting Chef Run for think
[2017-11-11T07:09:06+00:00] INFO: Running start handlers
[2017-11-11T07:09:06+00:00] INFO: Start handlers complete.
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
[2017-11-11T07:09:06+00:00] INFO: Error while reporting run start to Data Collector. URL: https://api.chef.io/organizations/test5179/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
resolving cookbooks for run list: ["package@0.4.0"]
[2017-11-11T07:09:06+00:00] INFO: Loading cookbooks [package@0.4.0]
[2017-11-11T07:09:06+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache
Synchronizing Cookbooks:
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/metadata.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/recipes/default.rb in the cache.
[2017-11-11T07:09:06+00:00] INFO: Storing updated cookbooks/package/templates/default/index.html.erb in the cache.
  - package (0.4.0)
Installing Cookbook Gems:
Compiling Cookbooks...
[2017-11-11T07:09:06+00:00] INFO: HTTP Request Returned 404 Not Found:
Converging 2 resources
Recipe: package::default
  * yum_package[httpd] action install[2017-11-11T07:09:06+00:00] INFO: Processing yum_package[httpd] action install (package::default line 11)
 (up to date)
  * template[/var/www/html/index.html] action create[2017-11-11T07:09:07+00:00] INFO: Processing template[/var/www/html/index.html] action create (package::default line 17)
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] backed up to /var/chef/backup/var/www/html/index.html.chef-20171111070907.700207
[2017-11-11T07:09:07+00:00] INFO: template[/var/www/html/index.html] updated file contents /var/www/html/index.html

    - update content in file /var/www/html/index.html from cf4a23 to afa033
    --- /var/www/html/index.html        2017-11-11 07:04:07.501825799 +0000
    +++ /var/www/html/.chef-index20171111-5588-9o80e0.html      2017-11-11 07:09:07.693933345 +0000
    @@ -1,3 +1,5 @@
    -<html> <body> <h1> 'welcome to chef files world ' </h1></body></html>

    +
    +
    +<html><body><h1> 'welcome to chef-templates wolrd' </h1></body></html>
[2017-11-11T07:09:07+00:00] WARN: Skipping final node save because override_runlist was given
[2017-11-11T07:09:07+00:00] INFO: Chef Run complete in 1.656787461 seconds
[2017-11-11T07:09:07+00:00] INFO: Skipping removal of unused files from the cache

Running handlers:
[2017-11-11T07:09:07+00:00] INFO: Running report handlers
Running handlers complete
[2017-11-11T07:09:07+00:00] INFO: Report handlers complete
Chef Client finished, 1/2 resources updated in 02 seconds
[2017-11-11T07:09:07+00:00] INFO: Sending resource update report (run-id: 982cfb80-8ca5-4bed-ab61-df6c6d61f471)





